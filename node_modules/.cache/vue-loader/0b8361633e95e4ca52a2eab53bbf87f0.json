{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/components/fromBuild/mapBuild.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/components/fromBuild/mapBuild.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Maps from '@/components/map/map.vue'\n\nimport build from './build'\nimport { keyApi } from '@/api/store'\nexport default {\n  name: '',\n  mixins: [build],\n  components: {\n    Maps,\n  },\n  data() {\n    return {\n      modalMap: false,\n      latitude: '',\n      longitude: '',\n      showMap: false,\n      keyUrl: '',\n    }\n  },\n  computed: {},\n  watch: {},\n  created() {\n    this.getKey()\n  },\n  mounted: function () {\n    window.addEventListener(\n      'message',\n      function (event) {\n        // 接收位置信息，用户选择确认位置点后选点组件会触发该事件，回传用户的位置信息\n        var loc = event.data\n        if (loc && loc.module === 'locationPicker') {\n          // 防止其他应用也会向该页面post信息，需判断module是否为'locationPicker'\n          window.parent.selectAdderss(loc)\n        }\n      },\n      false\n    )\n    window.selectAdderss = this.selectAdderss\n  },\n  methods: {\n    // 选择经纬度\n    selectAdderss(data) {\n      this.valueModel = data.latlng.lat + ',' + data.latlng.lng\n      this.modalMap = false\n      this.$emit('changeValue', { field: this.field, value: this.valueModel })\n    },\n    // 查找位置\n    onSearch(value) {\n      this.modalMap = true\n      this.valueModel = ''\n    },\n    // mapkey值\n    getKey() {\n      keyApi()\n        .then(async (res) => {\n          let keys = res.data.key\n          this.keyUrl = `https://apis.map.qq.com/tools/locpicker?type=1&key=${keys}&referer=myapp`\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg)\n        })\n    },\n  },\n}\n",null]}