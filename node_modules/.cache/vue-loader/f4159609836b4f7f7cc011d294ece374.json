{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/statistic/capital/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/statistic/capital/index.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from \"vuex\";\nimport { getFlowList, setMarks } from \"@/api/statistic\";\nimport timeOptions from \"@/utils/timeOptions\";\nexport default {\n  name: \"order\",\n  data() {\n    return {\n      modalmark: false,\n      options: timeOptions,\n      remarks: {\n        mark: \"\",\n      },\n      staff: [],\n      total: 0,\n      grid: {\n        xl: 7,\n        lg: 7,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      loading: false,\n      columns: [\n        {\n          title: \"交易单号\",\n          key: \"flow_id\",\n          minWidth: 180,\n        },\n        {\n          title: \"关联订单\",\n          key: \"order_id\",\n          minWidth: 180,\n        },\n        {\n          title: \"交易金额\",\n          slot: \"price\",\n          minWidth: 80,\n        },\n        {\n          title: \"交易用户\",\n          key: \"nickname\",\n          ellipsis: true,\n          minWidth: 80,\n        },\n        {\n          title: \"交易时间\",\n          key: \"add_time\",\n          minWidth: 150,\n        },\n        {\n          title: \"交易类型\",\n          key: \"trading_type\",\n          minWidth: 80,\n        },\n        {\n          title: \"支付方式\",\n          key: \"pay_type\",\n          minWidth: 80,\n        },\n        {\n          title: \"备注\",\n          key: \"mark\",\n          minWidth: 120,\n        },\n        {\n          title: \"操作\",\n          slot: \"action\",\n          // fixed: \"right\",\n          minWidth: 80,\n          align: \"center\",\n        },\n      ],\n      tabList: [],\n      withdrawal: [],\n      formValidate: {\n        trading_type: '',\n        time: \"\",\n        keywords: \"\",\n        page: 1,\n        limit: 20,\n      },\n      timeVal: [],\n      fromList: {\n        title: \"选择时间\",\n        custom: true,\n        fromTxt: [\n          { text: \"全部\", val: \"\" },\n          { text: \"昨天\", val: \"yesterday\" },\n          { text: \"今天\", val: \"today\" },\n          { text: \"本周\", val: \"week\" },\n          { text: \"本月\", val: \"month\" },\n          { text: \"本季度\", val: \"quarter\" },\n          { text: \"本年\", val: \"year\" },\n        ],\n      },\n    };\n  },\n  computed: {\n    ...mapState(\"admin/layout\", [\"isMobile\"]),\n    labelWidth() {\n      return this.isMobile ? undefined : 96;\n    },\n    labelPosition() {\n      return this.isMobile ? \"top\" : \"right\";\n    },\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    getList() {\n      this.loading = true;\n      getFlowList(this.formValidate)\n        .then(async (res) => {\n          let data = res.data;\n          this.tabList = data.list;\n          this.total = data.count;\n          this.withdrawal = data.status;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    search() {\n      this.formValidate.page = 1;\n      // this.formValidate.trading_type = e;\n      this.getList();\n    },\n    reset() {\n      this.formValidate = {\n        trading_type: 0,\n        time: \"\",\n        keywords: \"\",\n        page: 1,\n        limit: 20,\n      };\n      this.timeVal = [];\n      this.getList();\n    },\n    // 选择时间\n    selectChange(tab) {\n      this.formValidate.page = 1;\n      this.formValidate.time = tab;\n      this.timeVal = [];\n      this.getList();\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formValidate.time = this.timeVal[0] ? this.timeVal.join(\"-\") : \"\";\n      this.formValidate.page = 1;\n      this.getList();\n    },\n    //分页\n    pageChange(status) {\n      this.formValidate.page = status;\n      this.getList();\n    },\n    remark(e) {\n      this.remarkId = e.id;\n      this.modalmark = true;\n      this.remarks.mark = e.mark;\n    },\n    //备注的提交\n    putRemark() {\n      this.modalmark = false;\n      setMarks(this.remarkId, this.remarks)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.modal_loading = false;\n          this.modals = false;\n          this.getList();\n        })\n        .catch((err) => {\n          this.modal_loading = false;\n          this.$Message.error(err.msg);\n        });\n    },\n    // 取消备注按钮\n    cancel() {\n      this.remarks = { mark: \"\" };\n      this.modalmark = false;\n    },\n  },\n};\n",null]}