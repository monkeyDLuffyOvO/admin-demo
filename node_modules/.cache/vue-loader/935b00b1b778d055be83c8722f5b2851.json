{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/work/clientGroup/addClientGroup.vue?vue&type=template&id=27d71210&scoped=true&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/work/clientGroup/addClientGroup.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["\n<!-- 新建群发 -->\n  <div>\n    <div class=\"i-layout-page-header\">\n      <PageHeader class=\"product_tabs\" hidden-breadcrumb>\n        <div slot=\"title\">\n          <div class=\"float-l\">\n            <router-link :to=\"{ path: '/admin/work/client/group' }\">\n              <div class=\"font-sm after-line\">\n                <span class=\"iconfont iconfanhui\"></span>\n                <span class=\"pl10\">返回</span>\n              </div>\n            </router-link>\n          </div>\n          <span class=\"mr20 ml16\">新建群发</span>\n        </div>\n      </PageHeader>\n    </div>\n\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt mb100\">\n      <Form :model=\"formItem\" ref=\"formItem\" :rules=\"ruleValidate\" :label-width=\"110\" :label-colon=\"true\">\n        <FormItem label=\"名称\" prop=\"name\">\n          <Input\n            v-model=\"formItem.name\"\n            class=\"input-add\"\n            placeholder=\"请输入名称\"\n          />\n        </FormItem>\n        <FormItem label=\"选择群发账号\" required>\n          <Button @click=\"addUser()\">选择成员</Button>\n          <div class=\"mt10\">\n            <Tag\n              closable\n              @on-close=\"handleDel\"\n              :name=\"item.name\"\n              size=\"medium\"\n              v-for=\"(item, index) in formItem.userids\"\n              :key=\"index\"\n              >{{ item.name }}</Tag\n            >\n          </div>\n        </FormItem>\n        <FormItem label=\"选择客户\" prop=\"client_type\">\n          <RadioGroup v-model=\"formItem.client_type\">\n            <Radio label=\"0\">全部客户</Radio>\n            <Radio label=\"1\">筛选客户</Radio>\n          </RadioGroup>\n          <div class=\"desc\">预计群发\n            <span class=\"client_count\">[{{clientCount}}]</span>人。\n            <span v-show=\"formItem.client_type == 1\">将消息发送给符合条件的客户</span>\n          </div>\n        </FormItem>\n        <template v-if=\"formItem.client_type == 1\">\n          <FormItem label=\"添加时间\">\n            <DatePicker\n              :editable=\"false\"\n              @on-change=\"onchangeTime\"\n              :value=\"timeVal\"\n              format=\"yyyy/MM/dd\"\n              type=\"datetimerange\"\n              placement=\"bottom-start\"\n              placeholder=\"自定义时间\"\n              class=\"input-add\"\n              :options=\"options\"\n            ></DatePicker>\n          </FormItem>\n          <FormItem label=\"标签\">\n            <TreeSelect\n              v-model=\"formItem.where_label\"\n              :data=\"labelList\"\n              v-width=\"460\"\n              multiple\n            />\n          </FormItem>\n          <FormItem label=\"排除标签\">\n            <TreeSelect\n              v-model=\"formItem.where_not_label\"\n              :data=\"newLabelList\"\n              v-width=\"460\"\n              multiple\n            />\n          <div class=\"desc\">\n            可根据标签选择客户，群发时将不会发送给该标签内的客户\n          </div>\n          </FormItem>\n        </template>\n        <FormItem label=\"群发内容\">\n          <Input\n            v-model=\"formItem.welcome_words.text.content\"\n            type=\"textarea\"\n            :rows=\"4\"\n           class=\"input-add\"\n          />\n        </FormItem>\n        <!-- <FormItem>\n          <Button type=\"primary\" ghost @click=\"insertName()\"\n            >插入客户名称</Button\n          >\n        </FormItem> -->\n        <FormItem>\n          <Poptip trigger=\"hover\">\n            <template slot=\"content\">\n              <div class=\"poptip_content\">\n                <div @click=\"modalPicTap('image')\">\n                  <div class=\"add_img acea-row row-center-wrapper\">\n                    <span class=\"iconfont icontupian4\"></span>\n                  </div>\n                  <span class=\"tip_tit\">图片</span>\n                </div>\n                <div @click=\"addRoutine()\">\n                  <div class=\"add_routine acea-row row-center-wrapper\">\n                    <span class=\"iconfont iconxiaochengxu\"></span>\n                  </div>\n                  <span class=\"tip_tit\">小程序</span>\n                </div>\n              </div>\n            </template>\n            <Button type=\"success\">添加图片/小程序</Button>\n          </Poptip>\n        </FormItem>\n        <FormItem>\n          <div\n            v-for=\"(item, index) in formItem.welcome_words.attachments\"\n            :key=\"index\"\n          >\n            <div\n              class=\"\n                ivu-tag\n                ivu-tag-dot\n                ivu-tag-size-default\n                ivu-tag-closable\n                ivu-tag-checked\n              \"\n            >\n              <span\n                v-if=\"item.msgtype == 'image'\"\n                class=\"iconfont icontupian4 tag_icon\"\n              ></span>\n              <span\n                v-if=\"item.msgtype == 'miniprogram'\"\n                class=\"iconfont iconxiaochengxu tag_icon\"\n              ></span>\n              <span v-if=\"item.msgtype == 'image'\" class=\"ivu-tag-text\">{{\n                item.image.pic_url\n              }}</span>\n              <span v-if=\"item.msgtype == 'miniprogram'\" class=\"ivu-tag-text\">{{\n                item.miniprogram.title\n              }}</span>\n              <i\n                v-if=\"item.msgtype == 'image'\"\n                class=\"ivu-icon ivu-icon-ios-close\"\n                @click=\"wordsDel(item.image.pic_url)\"\n              ></i>\n              <i\n                v-if=\"item.msgtype == 'miniprogram'\"\n                class=\"ivu-icon ivu-icon-ios-close\"\n                @click=\"wordsDel(item.miniprogram.title)\"\n              ></i>\n            </div>\n          </div>\n        </FormItem>\n        <FormItem label=\"发送类型\" prop=\"template_type\">\n          <RadioGroup v-model=\"formItem.template_type\">\n            <Radio label=\"0\">立即发送</Radio>\n            <Radio label=\"1\">定时发送</Radio>\n          </RadioGroup>\n        </FormItem>\n        <FormItem label=\"定时发送时间\" v-if=\"formItem.template_type == 1\">\n          <DatePicker\n            type=\"datetime\"\n            v-model=\"formItem.send_time\"\n            @on-change=\"snedChangeTime\"\n            placeholder=\"请选择发送时间\"\n           class=\"input-add\"\n          ></DatePicker>\n        </FormItem>\n      </Form>\n    </Card>\n    <Card :bordered=\"false\" dis-hover class=\"fixed-card\">\n      <div class=\"acea-row row-center-wrapper\">\n        <Button type=\"primary\" @click=\"submit()\" class=\"step_btn\">提交</Button>\n      </div>\n    </Card>\n    <Modal\n      v-model=\"modalPic\"\n      width=\"960px\"\n      scrollable\n      footer-hide\n      closable\n      title=\"logo\"\n      :mask-closable=\"false\"\n      :z-index=\"9\"\n    >\n      <uploadPictures\n        :isChoice=\"isChoice\"\n        @getPic=\"getPic\"\n        :gridBtn=\"gridBtn\"\n        :gridPic=\"gridPic\"\n        v-if=\"modalPic\"\n      ></uploadPictures>\n    </Modal>\n    <Modal\n      v-model=\"modalRoutine\"\n      title=\"添加小程序消息\"\n      @on-ok=\"routineConfirm\"\n      :z-index=\"1\"\n    >\n      <Form :model=\"formItem\" :label-width=\"110\">\n        <FormItem label=\"封面图:\">\n          <div class=\"picBox\" @click=\"modalPicTap('routine')\">\n            <div class=\"pictrue\" v-if=\"rontineObj.miniprogram.pic_url\">\n              <img v-lazy=\"rontineObj.miniprogram.pic_url\" />\n            </div>\n            <div class=\"upLoad\" v-else>\n              <div class=\"iconfont\">+</div>\n            </div>\n          </div>\n        </FormItem>\n        <FormItem label=\"小程序消息标题:\">\n          <Input v-model=\"rontineObj.miniprogram.title\"></Input>\n        </FormItem>\n        <FormItem label=\"小程序Appid:\">\n          <Input v-model=\"rontineObj.miniprogram.appid\"></Input>\n        </FormItem>\n        <FormItem label=\"小程序功能页:\">\n          <Input v-model=\"rontineObj.miniprogram.page\"></Input>\n        </FormItem>\n      </Form>\n    </Modal>\n    <department\n      ref=\"department\"\n      :active-department=\"activeDepartment\"\n      :is-site=\"isSite\"\n      :userList=\"userList\"\n      :only-department=\"onlyDepartment\"\n      @changeMastart=\"changeMastart\"\n    />\n  </div>\n",null]}