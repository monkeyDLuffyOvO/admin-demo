{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/setting/userAgreement/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/setting/userAgreement/index.vue","mtime":1652232731000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from \"vuex\";\nimport WangEditor from \"@/components/wangEditor/index.vue\";\nimport { getAgreement, setAgreement } from \"@/api/system\";\n\nexport default {\n  name: \"Agreement\",\n  components: { WangEditor },\n  data() {\n    return {\n      dialog: {},\n      isChoice: \"单选\",\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      loading: false,\n      formValidate: {\n        content: \"\",\n      },\n      ruleValidate: {\n        // content: [\n        //     {required: true, message: '请输入内容', trigger: 'change'}\n        // ]\n      },\n      value: \"\",\n      modalPic: false,\n      template: false,\n      treeData: [],\n      myConfig: {\n        autoHeightEnabled: false, // 编辑器不自动被内容撑高\n        initialFrameHeight: 500, // 初始容器高度\n        initialFrameWidth: \"100%\", // 初始容器宽度\n        UEDITOR_HOME_URL: \"/admin/UEditor/\",\n        serverUrl: \"\",\n      },\n      content:''\n    };\n  },\n  computed: {\n    ...mapState(\"media\", [\"isMobile\"]),\n    labelWidth() {\n      return this.isMobile ? undefined : 120;\n    },\n    labelPosition() {\n      return this.isMobile ? \"top\" : \"right\";\n    },\n  },\n  watch: {\n    $route(to, from) {\n      this.getAgreement();\n    },\n  },\n  methods: {\n\t getEditorContent(data) {\n\t   this.formValidate.content = data;\n\t }, \n    // ...mapActions('admin/page', [\n    //   'close'\n    // ]),\n    getContent(val) {\n      this.formValidate.content = val;\n    },\n    // 提交数据\n    onsubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          setAgreement(this.formValidate)\n            .then(async (res) => {\n              this.$Message.success(res.msg);\n            })\n            .catch((res) => {\n              this.$Message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    //详情\n    getAgreement() {\n      getAgreement()\n        .then(async (res) => {\n          let data = res.data;\n          this.formValidate = {\n            content: data.content,\n          };\n          this.content = data.content\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    addCustomDialog(editorId) {\n      window.UE.registerUI(\n        \"test-dialog\",\n        function (editor, uiName) {\n          // 创建 dialog\n          let dialog = new window.UE.ui.Dialog({\n            // 指定弹出层中页面的路径，这里只能支持页面，路径参考常见问题 2\n            iframeUrl: \"/admin/widget.images/index.html?fodder=dialog\",\n            // 需要指定当前的编辑器实例\n            editor: editor,\n            // 指定 dialog 的名字\n            name: uiName,\n            // dialog 的标题\n            title: \"上传图片\",\n            // 指定 dialog 的外围样式\n            cssRules: \"width:1200px;height:500px;padding:20px;\",\n          });\n          this.dialog = dialog;\n          var btn = new window.UE.ui.Button({\n            name: \"dialog-button\",\n            title: \"上传图片\",\n            cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n            onclick: function () {\n              // 渲染dialog\n              dialog.render();\n              dialog.open();\n            },\n          });\n          return btn;\n        },\n        37\n      );\n    },\n  },\n  mounted() {\n    this.getAgreement();\n  },\n};\n",null]}