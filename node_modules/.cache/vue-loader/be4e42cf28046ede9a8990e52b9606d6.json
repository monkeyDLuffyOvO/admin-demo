{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/components/uploadVideo/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/components/uploadVideo/index.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { productGetTempKeysApi } from '@/api/product';\nimport '../../../public/UEditor/dialogs/internal';\nexport default {\n    name: 'vide11o',\n    data () {\n        return {\n            upload: {\n                videoIng: false // 是否显示进度条；\n            },\n            progress: 0, // 进度条默认0\n            videoLink: '',\n            formValidate: {\n                video_link: ''\n            },\n        };\n    },\n    methods: {\n        // 删除视频；\n        delVideo () {\n            let that = this;\n            that.$set(that.formValidate, 'video_link', '');\n        },\n        zh_uploadFile () {\n            if (this.videoLink) {\n                this.formValidate.video_link = this.videoLink;\n            } else {\n                this.$refs.refid.click();\n            }\n        },\n        zh_uploadFile_change (evfile) {\n            let that = this;\n            let suffix = evfile.target.files[0].name.substr(\n                evfile.target.files[0].name.indexOf('.')\n            );\n            if (suffix !== '.mp4') {\n                return that.$Message.error('只能上传MP4文件');\n            }\n            productGetTempKeysApi().then(res => {\n                that.$videoCloud\n                    .videoUpload({\n                        type: res.data.type,\n                        evfile: evfile,\n                        res: res,\n                        uploading (status, progress) {\n                            that.upload.videoIng = status;\n                        }\n                    })\n                    .then(res => {\n                        that.formValidate.video_link = res.url;\n                        that.$Message.success('视频上传成功');\n                    })\n                    .catch(res => {\n                        that.$Message.error(res);\n                });\n            });\n        },\n      uploads () {\n        nowEditor.editor.execCommand('inserthtml', `<p><img/><video src='${this.formValidate.video_link}' controls></video><br/></p>`)\n        nowEditor.dialog.close(true)\n      },\n    }\n};\n",null]}