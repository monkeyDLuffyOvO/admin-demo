{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/product/components/replyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/product/components/replyList.vue","mtime":1662341777000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from \"vuex\";\nimport {\n\tproductReplycomment,\n\tproductReplySave\n} from \"@/api/product\"\nimport { videoCommentReply, videoReply } from \"@/api/marketing\";\nexport default {\n\tname: 'userList',\n\tprops: {\n\t\tfromType: {\n\t\t\ttype: Number,\n\t\t\tdefault:0\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcontents: {\n\t\t\t  content: \"\",\n\t\t\t},\n\t\t\truleInline: {\n\t\t\t  content: [\n\t\t\t    { required: true, message: \"请输入回复内容\", trigger: \"blur\" },\n\t\t\t  ],\n\t\t\t},\n\t\t\treplyModals: false,\n\t\t\tmodals: false,\n\t\t\ttotal: 0,\n\t\t\treplyFrom: {\n\t\t\t\tpage: 1,\n\t\t\t\tlimit: 15\n\t\t\t},\n\t\t\ttime:'',\n\t\t\tloading: false,\n\t\t\tdataList: [],\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"ID\",\n\t\t\t\t\tkey: \"id\",\n\t\t\t\t\twidth: 80,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '评论用户',\n\t\t\t\t\tslot: 'info',\n\t\t\t\t\tminWidth: 90\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"评论内容\",\n\t\t\t\t\tkey: \"content\",\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"后台回复\",\n\t\t\t\t\tslot: \"merchantReply\",\n\t\t\t\t\tminWidth: 100,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t  title: \"操作\",\n\t\t\t\t  slot: \"action\",\n\t\t\t\t  minWidth: 50,\n\t\t\t\t}\n\t\t\t],\n\t\t\trows: {},\n\t\t\tfromList: {\n\t\t\t  title: \"选择时间\",\n\t\t\t  custom: true,\n\t\t\t  fromTxt: [\n\t\t\t    { text: \"全部\", val: \"\" },\n\t\t\t    { text: \"今天\", val: \"today\" },\n\t\t\t    { text: \"昨天\", val: \"yesterday\" },\n\t\t\t    { text: \"最近7天\", val: \"lately7\" },\n\t\t\t    { text: \"最近30天\", val: \"lately30\" },\n\t\t\t    { text: \"本月\", val: \"month\" },\n\t\t\t    { text: \"本年\", val: \"year\" },\n\t\t\t  ],\n\t\t\t},\n\t\t\ttimeVal: [],\n\t\t\treplyId: 0\n\t\t}\n\t},\n\tcomputed: {\n\t  ...mapState(\"admin/layout\", [\"isMobile\"]),\n\t  labelWidth() {\n\t    return this.isMobile ? undefined : 75;\n\t  },\n\t  labelPosition() {\n\t    return this.isMobile ? \"top\" : \"left\";\n\t  },\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\toks() {\n\t\t  this.$refs[\"contents\"].validate((valid) => {\n\t\t    if (valid) {\n\t\t      let apiName = this.fromType?videoReply(this.contents, this.rows.id):\n\t\t\t\t\t  productReplySave(this.contents, this.replyId, this.rows.id);\n\t\t\t\tapiName.then(async (res) => {\n\t\t          this.$Message.success(res.msg);\n\t\t          this.replyModals = false;\n\t\t          this.$refs[\"contents\"].resetFields();\n\t\t          this.getList(this.replyId);\n\t\t        })\n\t\t        .catch((res) => {\n\t\t          this.$Message.error(res.msg);\n\t\t        });\n\t\t    } else {\n\t\t      return false;\n\t\t    }\n\t\t  });\n\t\t},\n\t\t// 具体日期\n\t\tonchangeTime(e) {\n\t\t  this.timeVal = e;\n\t\t  this.time = this.timeVal[0] ? this.timeVal.join(\"-\") : \"\";\n\t\t  this.replyFrom.page = 1;\n\t\t},\n\t\t// 选择时间\n\t\tselectChange(tab) {\n\t\t  this.time = tab;\n\t\t  this.timeVal = [];\n\t\t  this.replyFrom.page = 1;\n\t\t  this.getList(this.replyId);\n\t\t},\n\t\tcancels() {\n\t\t  this.replyModals = false;\n\t\t  this.$refs[\"contents\"].resetFields();\n\t\t},\n\t\treply(row){\n\t\t\tthis.contents.content = row.children?row.children.content:'';\n\t\t\tthis.rows = row;\n\t\t\tthis.replyModals = true;\n\t\t},\n\t\t// 删除\n\t\tdel (row, tit, num) {\n\t\t\tlet urls = '';\n\t\t\turls = this.fromType?`/marketing/video/comment/${row.id}`:`product/reply/delete_comment/${row.id}`;\n\t\t    let delfromData = {\n\t\t        title: tit,\n\t\t        num: num,\n\t\t        url: urls,\n\t\t        method: 'DELETE',\n\t\t        ids: ''\n\t\t    };\n\t\t    this.$modalSure(delfromData).then((res) => {\n\t\t        this.$Message.success(res.msg);\n\t\t        this.getList(this.replyId);\n\t\t    }).catch(err => {\n\t\t        this.$Message.error(err.msg);\n\t\t    });\n\t\t},\n\t\t//评论回复列表\n\t\tgetList(id) {\n\t\t\tthis.replyId = id;\n\t\t\tthis.loading = true;\n\t\t\tlet apiName = '';\n\t\t\tif(this.fromType){\n\t\t\t\tthis.replyFrom.data = this.time;\n\t\t\t\tapiName = videoCommentReply;\n\t\t\t}else {\n\t\t\t\tthis.replyFrom.time =  this.time;\n\t\t\t\tapiName = productReplycomment;\n\t\t\t}\n\t\t\tapiName(this.replyFrom,id).then(res => {\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.total = res.data.count;\n\t\t\t\tthis.dataList = res.data.list;\n\t\t\t}).catch(err => {\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.$Message.error(err.msg)\n\t\t\t})\n\t\t},\n\t\tpageChange(page){\n\t\t  this.replyFrom.page = page;\n\t\t  this.getList(this.replyId);\n\t\t}\n\t}\n}\n",null]}