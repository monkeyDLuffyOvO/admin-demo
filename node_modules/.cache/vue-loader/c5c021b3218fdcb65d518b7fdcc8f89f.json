{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/system/group/pc.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/system/group/pc.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport { mapState } from \"vuex\";\n\timport WangEditor from \"@/components/wangEditor/index.vue\";\n\timport { diyGetInfo, diySave } from  '@/api/diy'\n    import editFrom from '@/components/from/from'\n    import {groupDataListApi, groupSaveApi, groupDataAddApi, pcLogoApi, pcLogoSave, getKfAdv, setKfAdv } from '@/api/system'\n\timport draggable from \"vuedraggable\"\n\timport uploadPictures from '@/components/uploadPictures';\n\timport linkaddress from '@/components/linkaddress'\n    export default {\n        name: 'list',\n        components: { editFrom, draggable, uploadPictures, linkaddress, WangEditor},\n        data () {\n            return {\n\t\t\t\truleValidate: {},\n\t\t\t\tformValidate: {\n\t\t\t\t  content: \"\",\n\t\t\t\t},\n\t\t\t\tcontent: \"\",\n\t\t\t\tpclogo:'',\n\t\t\t\tgrid: {\n\t\t\t\t\t\txl: 7,\n\t\t\t\t\t\tlg: 7,\n\t\t\t\t\t\tmd: 12,\n\t\t\t\t\t\tsm: 24,\n\t\t\t\t\t\txs: 24\n\t\t\t\t\t},\n\t\t\t\tswiperOption:{\n\t\t\t\t    //显示分页\n\t\t\t\t    pagination: {\n\t\t\t\t        el: '.swiper-pagination'\n\t\t\t\t    },\n\t\t\t\t    //设置点击箭头\n\t\t\t\t    navigation: {\n\t\t\t\t        nextEl: '.swiper-button-next',\n\t\t\t\t        prevEl: '.swiper-button-prev'\n\t\t\t\t    },\n\t\t\t\t    //自动轮播\n\t\t\t\t    autoplay: {\n\t\t\t\t        delay: 2000,\n\t\t\t\t        //当用户滑动图片后继续自动轮播\n\t\t\t\t        disableOnInteraction: false,\n\t\t\t\t    },\n\t\t\t\t    //开启循环模式\n\t\t\t\t    loop: false\n\t\t\t\t},\n\t\t\t\tpageId:1,\n\t\t\t\ttabList:[],\n\t\t\t\tlastObj:{\n\t\t\t\t\tadd_time: '',\n\t\t\t\t\tconfig_name: '',\n\t\t\t\t\tid: '',\n\t\t\t\t\timage: \"\",\n\t\t\t\t\tsort: 1,\n\t\t\t\t\tstatus: 1,\n\t\t\t\t\ttitle: \"\",\n\t\t\t\t\turl: \"\"\n\t\t\t\t},\n\t\t\t\tisChoice: '单选',\n\t\t\t\tmodalPic: false,\n\t\t\t\tgridPic: {\n\t\t\t\t    xl: 6,\n\t\t\t\t    lg: 8,\n\t\t\t\t    md: 12,\n\t\t\t\t    sm: 12,\n\t\t\t\t    xs: 12\n\t\t\t\t},\n\t\t\t\tgridBtn: {\n\t\t\t\t    xl: 4,\n\t\t\t\t    lg: 8,\n\t\t\t\t    md: 8,\n\t\t\t\t    sm: 8,\n\t\t\t\t    xs: 8\n\t\t\t\t},\n\t\t\t\tactiveIndex: 0,\n\t\t\t\tmyConfig: {\n\t\t\t\t  autoHeightEnabled: false, // 编辑器不自动被内容撑高\n\t\t\t\t  initialFrameHeight: 500, // 初始容器高度\n\t\t\t\t  initialFrameWidth: \"100%\", // 初始容器宽度\n\t\t\t\t  UEDITOR_HOME_URL: \"/admin/UEditor/\",\n\t\t\t\t  serverUrl: \"\",\n\t\t\t\t},\n\t\t\t\tactiveIndexs:0,\n            }\n        },\n\t\tcomputed: {\n\t\t  ...mapState('admin/layout', [\n\t\t      'isMobile',\n\t\t\t\t\t'menuCollapse'\n\t\t  ]),\n\t\t  labelWidth() {\n\t\t    return this.isMobile ? undefined : 120;\n\t\t  },\n\t\t  labelPosition() {\n\t\t    return this.isMobile ? \"top\" : \"right\";\n\t\t  },\n\t\t},\n\t\tmounted() {\n\t\t\tthis.menu(1);\n\t\t\tthis.info();\n\t\t},\n        methods: {\n\t\t\tgetEditorContent(content) {\n\t\t\t  this.content = content;\n\t\t\t},\n\t\t\tlinkUrl(e){\n\t\t\t\tthis.tabList.list[this.activeIndexs].url = e\n\t\t\t\t// item.url = e\n\t\t\t},\n\t\t\tgetContent(val) {\n\t\t\t  this.formValidate.content = val;\n\t\t\t},\n\t\t\t// 提交数据\n\t\t\tonsubmit(name) {\n\t\t\t  this.$refs[name].validate((valid) => {\n\t\t\t    if (valid) {\n\t\t\t\tthis.formValidate.content = this.content;\n\t\t\t      setKfAdv(this.formValidate)\n\t\t\t        .then(async (res) => {\n\t\t\t          this.$Message.success(res.msg);\n\t\t\t        })\n\t\t\t        .catch((res) => {\n\t\t\t          this.$Message.error(res.msg);\n\t\t\t\t\t});\n\t\t\t    } else {\n\t\t\t      return false;\n\t\t\t    }\n\t\t\t  });\n\t\t\t},\n\t\t\t//详情\n\t\t\tgetKfAdv() {\n\t\t\t  getKfAdv()\n\t\t\t    .then((res) => {\n\t\t\t\t\tlet content = res.data.content?res.data.content:'';\n\t\t\t\t\tthis.formValidate.content = content;\n\t\t\t\t\tthis.content = content\n\t\t\t\t//   let data = res.data;\t  \n\t\t\t    //   this.formValidate = {\n\t\t\t    //     content: data.content,\n\t\t\t    //   };\n\t\t\t    })\n\t\t\t    .catch((res) => {\n\t\t\t      this.loading = false;\n\t\t\t      this.$Message.error(res.msg);\n\t\t\t    });\n\t\t\t},\n\t\t\taddCustomDialog(editorId) {\n\t\t\t  window.UE.registerUI(\n\t\t\t    \"test-dialog\",\n\t\t\t    function (editor, uiName) {\n\t\t\t      // 创建 dialog\n\t\t\t      let dialog = new window.UE.ui.Dialog({\n\t\t\t        // 指定弹出层中页面的路径，这里只能支持页面，路径参考常见问题 2\n\t\t\t        iframeUrl: \"/admin/widget.images/index.html?fodder=dialog\",\n\t\t\t        // 需要指定当前的编辑器实例\n\t\t\t        editor: editor,\n\t\t\t        // 指定 dialog 的名字\n\t\t\t        name: uiName,\n\t\t\t        // dialog 的标题\n\t\t\t        title: \"上传图片\",\n\t\t\t        // 指定 dialog 的外围样式\n\t\t\t        cssRules: \"width:1200px;height:500px;padding:20px;\",\n\t\t\t      });\n\t\t\t      this.dialog = dialog;\n\t\t\t      var btn = new window.UE.ui.Button({\n\t\t\t        name: \"dialog-button\",\n\t\t\t        title: \"上传图片\",\n\t\t\t        cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n\t\t\t        onclick: function () {\n\t\t\t          // 渲染dialog\n\t\t\t          dialog.render();\n\t\t\t          dialog.open();\n\t\t\t        },\n\t\t\t      });\n\t\t\t      return btn;\n\t\t\t    },\n\t\t\t    37\n\t\t\t  );\n\t\t\t},\n\t\t\t // 添加表单\n\t\t\tgroupAdd () {\n\t\t\t\tthis.$modalForm(groupDataAddApi({ config_name: this.pageId}, 'setting/group_data/create')).then(() => this.info())\n\t\t\t},\n\t\t\tinfo(){\n\t\t\t\tif(this.pageId == 'pc_home_banner'){\n\t\t\t\t\tgroupDataListApi({config_name:this.pageId}, 'setting/group_data').then(async res => {\n\t\t\t\t\tthis.tabList = res.data\n\t\t\t\t\t\tthis.tabList.list.forEach((item,index,array)=>{\n\t\t\t\t\t\t\tif(typeof(item.image) != 'string' && item.image != 'undefined'){\n\t\t\t\t\t\t\t\titem.image = item.image[0]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}).catch(res => {\n\t\t\t\t\t\tthis.$Message.error(res.msg)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif(this.pageId == 1){\n\t\t\t\t\tpcLogoApi('pc_logo').then(res=>{\n\t\t\t\t\t\tthis.pclogo = res.data.value\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif(this.pageId == 3){\n\t\t\t\t\tthis.getKfAdv();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmenu(id){\n\t\t\t\tthis.pageId = id\n\t\t\t\tthis.info()\n\t\t\t},\n\t\t\taddBox(){\n\t\t\t\tif (this.tabList.list.length == 0) {\n\t\t\t\t    this.tabList.list.push(this.lastObj)\n\t\t\t\t\tthis.lastObj = {\n\t\t\t\t\t\tadd_time: '',\n\t\t\t\t\t\tcomment: \"\",\n\t\t\t\t\t\tgid: '',\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\timg: '',\n\t\t\t\t\t\tlink: '',\n\t\t\t\t\t\tsort: '',\n\t\t\t\t\t\tstatus: 1,\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t    if(this.tabList.list.length==5) {\n\t\t\t\t\t\tthis.$Message.warning(\"最多添加五张呦\")\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet obj = JSON.parse(JSON.stringify(this.lastObj))\n\t\t\t\t\t\tthis.tabList.list.push(obj)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\t\t\t// 删除\n\t\t\tbindDelete(item, index) {\n\t\t\t    if (this.tabList.list.length == 1) {\n\t\t\t        this.lastObj = this.tabList.list[0]\n\t\t\t    }\n\t\t\t    this.tabList.list.splice(index, 1)\n\t\t\t},\n\t\t\t// 点击图文封面\n\t\t\tmodalPicTap(title, index) {\n\t\t\t    this.activeIndex = index\n\t\t\t    this.modalPic = true;\n\t\t\t},\n\t\t\t// 获取图片信息\n\t\t\tgetPic(pc) {\n\t\t\t    this.$nextTick(() => {\n\t\t\t\t\tif(this.pageId == 'pc_home_banner'){\n\t\t\t\t\t\tthis.tabList.list[this.activeIndex].image = pc.att_dir;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.pclogo = pc.att_dir;\n\t\t\t\t\t}\n\t\t\t        this.modalPic = false;\n\t\t\t    })\n\t\t\t},\n\t\t\tsave(){\n\t\t\t\tif(this.pageId == 'pc_home_banner'){\n\t\t\t\t\tgroupSaveApi({config_name:this.pageId,data:this.tabList.list}).then(res=>{\n\t\t\t\t\t\tthis.$Message.success(res.msg)\n\t\t\t\t\t}).catch(err=>{\n\t\t\t\t\t\tthis.$Message.error(err.msg)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif(this.pageId == 1){\n\t\t\t\t\tpcLogoSave({pc_logo:this.pclogo}).then(res=>{\n\n\t\t\t\t\t\tthis.$Message.success(res.msg)\n\t\t\t\t\t}).catch(err=>{\n\t\t\t\t\t\tthis.$Message.error(err.msg)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif(this.pageId == 3){\n\t\t\t\t\tthis.onsubmit('formValidate')\n\t\t\t\t}\n\t\t\t},\n\t\t\tlink(index){\n\t\t\t\tthis.activeIndexs = index\n\t\t\t\tthis.$refs.linkaddres.modals = true;\n\t\t\t}\n        }\n    }\n",null]}