{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/system/group/components/groupFrom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/system/group/components/groupFrom.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { groupAddApi, groupInfoApi } from '@/api/system';\nexport default {\n    name: 'menusFrom',\n    props: {\n        groupId: {\n            type: Number,\n            default: 0\n        },\n        titleFrom: {\n            type: String,\n            default: ''\n        },\n        addId: {\n            type: String,\n            default: ''\n        }\n    },\n    data () {\n        return {\n            iconVal: '',\n            grid: {\n                xl: 7,\n                lg: 7,\n                md: 12,\n                sm: 24,\n                xs: 24\n            },\n            modals: false,\n            modal12: false,\n            ruleValidate: {\n                name: [\n                    { required: true, message: '请输入数据组名称', trigger: 'blur' }\n                ],\n                config_name: [\n                    { required: true, message: '请输入数据字段', trigger: 'blur' }\n                ],\n                info: [\n                    { required: true, message: '请输入数据简介', trigger: 'blur' }\n                ],\n                names: [\n                    { required: true, message: '请输入字段名称', trigger: 'blur' }\n                ]\n            },\n            FromData: [],\n            valids: false,\n            list2: [],\n            formValidate: {\n                name: '',\n                config_name: '',\n                info: '',\n                typelist: [],\n                cate_id:0,\n            }\n        }\n    },\n    watch: {\n        'addId' (n) {\n            if (n === 'addId') {\n                this.formValidate.typelist = []\n            }\n        }\n    },\n    methods: {\n        // 点击添加字段\n        addType () {\n            this.formValidate.typelist.push({\n                name: {\n                    value: ''\n                },\n                title: {\n                    value: ''\n                },\n                type: {\n                    value: ''\n                },\n                param: {\n                    placeholder: '参数方式例如:\\n1=白色\\n2=红色\\n3=黑色',\n                    value: ''\n                }\n            })\n        },\n        // 删除字段\n        delGroup (index) {\n            this.formValidate.typelist.splice(index, 1);\n        },\n        // 详情\n        fromData (id) {\n            groupInfoApi(id).then(async res => {\n                this.formValidate = res.data.info;\n            }).catch(res => {\n                this.$Message.error(res.msg);\n            })\n        },\n        // 提交\n        handleSubmit (name) {\n            let data = {\n                url: this.groupId ? `/setting/group/${this.groupId}` : 'setting/group',\n                method: this.groupId ? 'put' : 'post',\n                datas: this.formValidate\n            };\n            this.$refs[name].validate((valid) => {\n                if (valid) {\n                    if (this.formValidate.typelist.length === 0) return this.$Message.error('请添加字段名称：姓名！');\n                    groupAddApi(data).then(async res => {\n                        this.$Message.success(res.msg);\n                        this.modals = false;\n                        this.$refs[name].resetFields();\n                        this.formValidate.typelist = [];\n                        this.$emit('getList');\n                    }).catch(res => {\n                        this.$Message.error(res.msg);\n                    })\n                } else {\n                    if (!this.formValidate.name) return this.$Message.error('请添加数据组名称！');\n                    if (!this.formValidate.config_name) return this.$Message.error('请添加数据字段！');\n                    if (!this.formValidate.info) return this.$Message.error('请添加数据简介！');\n                }\n            })\n        },\n        handleReset () {\n            this.modals = false;\n            this.$refs['formValidate'].resetFields();\n            this.$emit('clearFrom')\n        }\n    },\n    created () {\n    },\n    mounted () {\n    }\n}\n",null]}