{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/supplier/supplierAdd/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/supplier/supplierAdd/index.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex'\nimport { getSupplier, addSupplier, putSupplier } from '@/api/supplier'\nimport { cityApi } from '@/api/store'\nexport default {\n  name: '',\n  components: {},\n  props: {},\n  data() {\n    return {\n      width: 150,\n      addresData: [],\n      formValidate: {\n        supplier_name: '',\n        name: '',\n        phone: '',\n        detailed_address: '',\n        address: '',\n        addressSelect: [],\n        email: '',\n        mark: '',\n        account: '',\n        pwd: '',\n        conf_pwd: '',\n        is_show: 0,\n        province: 0,\n        city: 0,\n        area: 0,\n        street: 0,\n      },\n      ruleValidate: {\n        supplier_name: [\n          {\n            required: true,\n            message: '供应商不能为空',\n            trigger: 'blur',\n          },\n        ],\n        phone: [\n          { required: true, message: '联系电话不能为空', trigger: 'blur' },\n          {\n            pattern: /^1[3456789]\\d{9}$/,\n            message: '手机号码格式不正确',\n            trigger: 'blur',\n          },\n        ],\n        account: [\n          {\n            required: true,\n            message: '请输入用户名',\n            trigger: 'blur',\n          },\n        ],\n        address: [\n          {\n            required: true,\n            message: '请填写具体地址',\n            trigger: 'blur',\n          },\n        ],\n        addressSelect: [\n          {\n            required: true,\n            message: '请选择省市区',\n            trigger: 'blur',\n          },\n        ],\n        pwd: [\n          {\n            required: true,\n            message: '请输入密码',\n            trigger: 'blur',\n          },\n        ],\n        conf_pwd: [\n          {\n            required: true,\n            message: '密码不能为空',\n            trigger: 'blur',\n          },\n        ],\n      },\n    }\n  },\n  computed: {\n    ...mapState('admin/layout', ['isMobile', 'menuCollapse']),\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right'\n    },\n  },\n  watch: {},\n  created() {\n    let data = { pid: 0 }\n    this.cityInfo(data)\n    if (this.$route.params.id) {\n      this.getSupplier()\n    }\n  },\n  mounted() {},\n  methods: {\n    // 获取省市区\n    cityInfo(data) {\n      cityApi(data).then((res) => {\n        this.addresData = res.data\n      })\n    },\n    loadData(item, callback) {\n      item.loading = true\n      cityApi({ pid: item.value }).then((res) => {\n        item.children = res.data\n        item.loading = false\n        callback()\n      })\n    },\n    // 选择省市区\n    addchack(e, selectedData) {\n      e.forEach((i, index) => {\n        if (index == 0) {\n          this.formValidate.province = i\n        } else if (index == 1) {\n          this.formValidate.city = i\n        } else if (index == 2) {\n          this.formValidate.area = i\n        } else {\n          this.formValidate.street = i\n        }\n      })\n      (this.formValidate.addressSelect)\n      this.formValidate.address = selectedData.map((o) => o.label).join('')\n    },\n    // 添加供应商\n    handleSubmit() {\n      if (this.$route.params.id) {\n        putSupplier(this.$route.params.id,this.formValidate)\n          .then(async (res) => {\n               this.$Message.success(res.msg)\n                   this.$router.push({ path: '/admin/supplier/menu/list' })\n          })\n          .catch((res) => {\n            this.$Message.error(res.msg)\n          })\n      } else {\n        addSupplier(this.formValidate)\n          .then(async (res) => {\n            this.$Message.success(res.msg)\n            this.$router.push({ path: '/admin/supplier/menu/list' })\n          })\n          .catch((res) => {\n            this.$Message.error(res.msg)\n            \n          })\n      }\n    },\n    // 获取供应商信息\n    getSupplier() {\n      getSupplier(this.$route.params.id)\n        .then(async (res) => {\n          this.formValidate = res.data\n          let addressSelect = []\n          if (res.data.province) {\n            addressSelect.push(res.data.province)\n          }\n          if (res.data.city) {\n            addressSelect.push(res.data.city)\n          }\n          if (res.data.area) {\n            addressSelect.push(res.data.area)\n          }\n          if (res.data.street) {\n            addressSelect.push(res.data.street)\n          }\n          this.formValidate.addressSelect = addressSelect\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg)\n        })\n    },\n  },\n}\n",null]}