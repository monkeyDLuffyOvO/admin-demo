{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/kefu/mobile/goods/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/kefu/mobile/goods/list.vue","mtime":1650075894000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {Socket} from '@/libs/socket';\nimport { productCart,productHot,productVisit } from '@/api/kefu.js'\nimport { serviceInfo } from '@/api/kefu_mobile'\nimport empty from \"../../components/empty\";\nexport default{\n    name:'product_info',\n    components:{\n        empty\n    },\n    data(){\n        return{\n            ops:{\n                bar:{\n                    background:'#393232',\n                    opacity:'.5',\n                    size:'2px'\n                }\n            },\n            searchTxt:'',\n            tabCur:0,\n            tabList:[\n                {\n                    key:0,\n                    title:'购买',\n                    api:'productCart'\n                },\n                {\n                    key:1,\n                    title:'足迹',\n                    api:'productHot'\n                },\n                {\n                    key:2,\n                    title:'热销',\n                    api:'productVisit'\n                }\n            ],\n            toUid:'',\n            list:[]\n        }\n    },\n    watch:{\n        tabCur(nVal,oVal){\n            this.list = []\n            if(nVal == 0) return this.getBuyList()\n            if(nVal == 1) return this.getVisit()\n            if(nVal == 2) return this.getProductHot()\n        }\n    },\n    created() {\n        serviceInfo().then(res => {\n            window.document.title = `${res.data.site_name} - 商品列表`\n        })\n        this.toUid = this.$route.query.toUid\n        this.getBuyList()\n    },\n    methods:{\n        // 购买记录\n        getBuyList(){\n            productCart(this.toUid,{\n                store_name:this.searchTxt\n            }).then(res=>{\n                this.list = res.data\n            })\n        },\n        // 热销商品\n        getProductHot(){\n            productHot(this.toUid,{\n                store_name:this.searchTxt\n            }).then(res=>{\n                this.list = res.data\n            })\n        },\n        // 足迹\n        getVisit(){\n            productVisit(this.toUid,{\n                store_name:this.searchTxt\n            }).then(res=>{\n                this.list = res.data\n            })\n        },\n        // 推送\n        bingGoods(item){\n            let obj = {\n                type: 'chat',\n                data: {\n                    msn:item.id,\n                    type:5,\n                    to_uid: this.toUid\n                }\n            }\n            this.bus.pageWs.then(ws => {\n                ws.send(obj)\n            });\n            // this.bus.$emit('selectGoods',item)\n            this.$router.go(-1)\n        },\n        // 顶部选项卡切换\n        bindTab(item){\n            this.tabCur = item.key\n        },\n        // 搜索\n        bindSearch(){\n            if(this.tabCur == 0) return this.getBuyList()\n            if(this.tabCur == 1) return this.getVisit()\n            if(this.tabCur == 2) return this.getProductHot()\n        }\n    }\n}\n",null]}