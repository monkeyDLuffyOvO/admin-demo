{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/components/map/map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/components/map/map.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n\n// +----------------------------------------------------------------------\n// | CRMEB [ CRMEB赋能开发者，助力企业发展 ]\n// +----------------------------------------------------------------------\n// | Copyright (c) 2016~2021 https://www.crmeb.com All rights reserved.\n// +----------------------------------------------------------------------\n// | Licensed CRMEB并不是自由软件，未经许可不能去掉CRMEB相关版权\n// +----------------------------------------------------------------------\n// | Author: CRMEB Team <admin@crmeb.com>\n// +----------------------------------------------------------------------\nimport { TMap } from \"./index\";\nexport default {\n    props: {\n        lat: {\n            type: Number,\n            default: 34.34127\n        },\n        lon: {\n            type: Number,\n            default: 108.93984\n        },\n        mapKey: {\n            tyep: String\n        },\n        address: {\n            tyep: String\n        }\n    },\n    data() {\n        return {\n            geocoder: undefined,\n            marker: null,\n            resultDatail: {}\n        };\n    },\n    created() {\n        this.initMap();\n    },\n    methods: {\n        //初始化地图\n        initMap() {\n            TMap(this.mapKey).then(qq => {\n                var map;\n                var center = new qq.maps.LatLng(this.lat, this.lon);\n                map = new qq.maps.Map(document.getElementById(\"container\"), {\n                    // center: center,\n                    zoom: 15\n                });\n                //调用地址解析类\n                this.geocoder = new qq.maps.Geocoder({\n                    complete: result => {\n                        map.setCenter(result.detail.location);\n                        this.marker = new qq.maps.Marker({\n                            map,\n                            position: result.detail.location\n                        });\n                        this.resultDatail = result.detail;\n                        this.$emit(\"getCoordinates\", result.detail);\n                    }\n                });\n                this.geocoder.getAddress(center);\n\n                // this.geocoder.getLocation(this.address);\n                // 开启监听点击\n                qq.maps.event.addListener(map, \"click\", event => {\n                    this.marker.setMap(null);\n                    this.marker.position = {\n                        lat: event.latLng.getLat(),\n                        lng: event.latLng.getLng()\n                    };\n                    var coord = new qq.maps.LatLng(\n                        event.latLng.getLat(),\n                        event.latLng.getLng()\n                    );\n                    this.geocoder.getAddress(coord);\n                });\n            });\n        },\n        // 搜索地点\n        searchKeyword(address = \"西安\") {\n            this.marker.setMap(null);\n            this.geocoder.getLocation(address);\n        }\n    }\n};\n",null]}