{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/kefu/mobile/orderList/orderDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/kefu/mobile/orderList/orderDetail.vue","mtime":1663291930000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import PriceChange from \"../../components/PriceChange\";\n    import ClipboardJS from \"clipboard\";\n    import {orderInfo,refundInfo} from '@/api/kefu';\n\timport { erpConfig } from \"@/api/erp\";\n    import {required, num} from \"@/utils/validate\";\n    import {validatorDefaultCatch} from \"@/libs/dialog\";\n\n    export default {\n        name: \"AdminOrder\",\n        components: {\n            PriceChange\n        },\n        props: {},\n        data: function () {\n            return {\n\t\t\t\topenErp:false,\n\t\t\t\tgiveData:{\n\t\t\t\t\tgive_integral:0,\n\t\t\t\t\tgive_coupon:[]\n\t\t\t\t},\n\t\t\t\tgiveCartInfo:[],\n                order: false,\n                change: false,\n                orderId: '',\n                orderInfo: {},\n                status: 0,\n                title: \"\",\n                payType: \"\",\n                types: \"\",\n\t\t\t\tisReturen:0\n            };\n        },\n        watch: {\n            \"$route\": function (newVal) {\n                let that = this;\n                if (newVal != undefined) {\n                    that.orderId = newVal;\n                    that.getIndex();\n                }\n            }\n        },\n        mounted: function () {\n\t\t\tthis.getErpConfig();\n            // this.orderId = this.$route.params.id;\n            this.getIndex();\n            this.$nextTick(function () {\n                var copybtn = document.getElementsByClassName(\"copy-data\");\n                const clipboard = new ClipboardJS(copybtn);\n                clipboard.on(\"success\", () => {\n                    this.$dialog.success(\"复制成功\");\n                });\n            });\n        },\n        methods: {\n\t\t\tgetErpConfig(){\n\t\t\t\terpConfig().then(res=>{\n\t\t\t\t\tthis.openErp = res.data.open_erp;\n\t\t\t\t}).catch(err=>{\n\t\t\t\t\tthis.$Message.error(err.msg);\n\t\t\t\t})\n\t\t\t},\n            more: function () {\n                this.order = !this.order;\n            },\n            modify: function (status) {\n\t\t\t\tif(status !=1 && openErp) return\n                this.change = true;\n                this.status = status;\n            },\n            changeclose: function (msg) {\n                this.change = msg;\n                this.getIndex()\n            },\n            closeChange(msg) {\n                this.change = msg;\n            },\n            getIndex: function () {\n                let that = this;\n\t\t\t\t\t\t\t\tlet isReturen = this.$route.params.goname || 0;\n\t\t\t\t\t\t\t\tlet obj = '';\n\t\t\t\t\t\t\t\tthis.isReturen = isReturen;\n\t\t\t\t\t\t\t\tif(isReturen == 1) {\n\t\t\t\t\t\t\t\t\tobj = refundInfo(this.$route.params.id);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tobj = orderInfo(this.$route.params.id);\n\t\t\t\t\t\t\t\t}\n                obj.then(\n                    res => {\n                        that.types = res.data.orderInfo._status._type;\n                        that.title = res.data.orderInfo._status._title;\n\t\t\t\t\t\tthat.giveData.give_coupon = res.data.orderInfo.give_coupon;\n\t\t\t\t\t\tthat.giveData.give_integral = res.data.orderInfo.give_integral;\n\t\t\t\t\t\tlet cartObj = [],giftObj = [];\n\t\t\t\t\t\tres.data.orderInfo.cartInfo.forEach((item, index) => {\n\t\t\t\t\t\t\tif(item.is_gift == 1){\n\t\t\t\t\t\t\t\tgiftObj.push(item)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tcartObj.push(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tres.data.orderInfo.cartInfo = cartObj;\n\t\t\t\t\t\tthat.$set(that, 'giveCartInfo', giftObj);\n\t\t\t\t\t\tthat.orderInfo = res.data.orderInfo;\n                        this.$nextTick(function () {\n                            let copybtn = document.getElementsByClassName(\"copy-data\");\n                            const clipboard = new ClipboardJS(copybtn);\n                            clipboard.on(\"success\", () => {\n                                this.$dialog.success(\"复制成功\");\n                            });\n                        });\n                    },\n                    err => {\n                        that.$dialog.error(err.msg);\n                    }\n                );\n            },\n            offlinePay: function () {\n\t\t\t\tif(openErp) return\n                setOfflinePay({orderId: this.orderInfo.orderId}).then(\n                    res => {\n                        this.$dialog.success(res.msg);\n                        this.getIndex();\n                    },\n                    err => {\n                        this.$dialog.error(err.msg);\n                    }\n                );\n            }\n        }\n    };\n",null]}