{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/setting/storeService/speechcraft.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/setting/storeService/speechcraft.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from \"vuex\";\nimport {\n  wechatSpeechcraft,\n  speechcraftCreate,\n  speechcraftEdit,\n  speechcraftcate,\n  speechcraftcateCreate,\n  speechcraftcateEdit,\n} from \"@/api/setting\";\nexport default {\n  name: \"index\",\n  computed: {\n    \n  },\n  data() {\n    return {\n      labelSort:[],\n      sortName:\"\",\n      current:0,\n      modals: false,\n      total: 0,\n      theme3: 'light',\n      tableFrom: {\n        page: 1,\n        limit: 10,\n        cate_id: 0,\n      },\n      timeVal: [],\n     \n      loading: false,\n      tableList: [],\n      columns1: [\n        {\n          title: \"ID\",\n          key: \"id\",\n          width: 80,\n        },\n        {\n          title: \"详情\",\n          key: \"message\",\n          minWidth: 320,\n        },\n        {\n          title: \"排序\",\n          key: \"sort\",\n          minWidth: 60,\n        },\n        {\n          title: \"添加时间\",\n          slot: \"add_time\",\n          minWidth: 120,\n        },\n        {\n          title: \"操作\",\n          slot: \"action\",\n          fixed: \"right\",\n          minWidth: 150,\n          maxWidth: 160\n        },\n      ]\n    };\n  },\n  created() {\n    this.getUserLabelAll();\n  },\n  methods: {\n    getUserLabelAll(key) {\n      speechcraftcate().then((res) => {\n        let data = res.data.data;\n        let obj = {\n          name: \"全部\",\n          id: \"\",\n        };\n        data.unshift(obj);\n        data.forEach((el) => {\n          el.status = false;\n        });\n        if (!key) {\n          this.sortName = data[0].id;\n          this.tableFrom.cate_id = data[0].id;\n          this.getList();\n        }\n        this.labelSort = data;\n      });\n    },\n    // 添加分类\n    addSort() {\n      this.$modalForm(speechcraftcateCreate()).then(() =>\n        this.getUserLabelAll()\n      );\n    },\n    //编辑标签分类\n    labelEdit(item) {\n      this.$modalForm(speechcraftcateEdit(item.id)).then(() =>\n        this.getUserLabelAll(1)\n      );\n    },\n    // 删除分类\n    deleteSort(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `app/wechat/speechcraftcate/${row.id}`,\n        method: \"DELETE\",\n        ids: \"\",\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.labelSort.splice(num, 1);\n          this.labelSort = [];\n          this.getUserLabelAll();\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 显示标签小菜单\n    showMenu(item) {\n      this.labelSort.forEach((el) => {\n        if (el.id == item.id) {\n          el.status = item.status ? false : true;\n        } else {\n          el.status = false;\n        }\n      });\n    },\n    // 选择分类\n    bindMenuItem(name, index) {\n      this.current = index;\n      this.labelSort.forEach((el) => {\n        el.status = false;\n      });\n      this.tableFrom.cate_id = name.id;\n      this.getList();\n    },\n   \n    // 编辑话术\n    edit(row) {\n      this.$modalForm(speechcraftEdit(row.id)).then(() => this.getList());\n    },\n    // 添加话术\n    add() {\n      this.$modalForm(speechcraftCreate({cate_id:this.tableFrom.cate_id})).then(() => this.getList());\n    },\n    \n    // 删除\n    del(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `/app/wechat/speechcraft/${row.id}`,\n        method: \"DELETE\",\n        ids: \"\",\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.tableList.splice(num, 1);\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 列表\n    getList() {\n      this.loading = true;\n      wechatSpeechcraft(this.tableFrom)\n        .then(async (res) => {\n          let data = res.data;\n          this.tableList = data.list;\n          this.total = res.data.count;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    // 翻页\n    pageChange(index) {\n      this.tableFrom.page = index;\n      this.getList();\n    },\n  },\n};\n",null]}