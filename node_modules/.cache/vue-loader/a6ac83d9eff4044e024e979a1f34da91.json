{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/setting/cityDada/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/setting/cityDada/index.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from \"vuex\";\nimport {\n  cityListApi,\n  cityAddApi,\n  cityApi,\n  cityCleanCacheApi,\n} from \"@/api/setting\";\nexport default {\n  name: \"setting_dada\",\n  data() {\n    return {\n      grid: {\n        xl: 7,\n        lg: 7,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      loading: false,\n      columns1: [\n        {\n          title: \"编号\",\n          key: \"id\",\n          width: 80,\n        },\n        {\n          title: \"地区名称\",\n          key: \"label\",\n          minWidth: 300,\n\t\t\t\t\ttree: true\n        },\n\t\t\t\t{\n\t\t\t\t  title: \"上级名称\",\n\t\t\t\t  key: \"parent_name\",\n\t\t\t\t  minWidth: 300,\n\t\t\t\t},\n        {\n          title: \"操作\",\n          slot: \"action\",\n          // fixed: \"right\",\n          minWidth: 120,\n        },\n      ],\n      cityLists: [],\n      cityId: 0, // 城市id\n    };\n  },\n  computed: {\n    ...mapState(\"media\", [\"isMobile\"]),\n    labelWidth() {\n      return this.isMobile ? undefined : 75;\n    },\n    labelPosition() {\n      return this.isMobile ? \"top\" : \"left\";\n    },\n  },\n  created() {\n    this.getList(0);\n  },\n  methods: {\n\t\t// 城市列表\n\t\tgetList(parentId) {\n\t\t  let that = this;\n\t\t  that.loading = true;\n\t\t  cityListApi(parentId)\n\t\t    .then((res) => {\n\t\t      that.cityLists = res.data;\n\t\t      that.loading = false;\n\t\t    })\n\t\t    .catch((res) => {\n\t\t      that.loading = false;\n\t\t      that.$Message.error(res.msg);\n\t\t    });\n\t\t},\n\t\t// handleLoadData (item, callback) {\n\t\t// \tcityListApi(item.id).then(res=>{\n\t\t// \t\tcallback(res.data);\n\t\t// \t});\n\t\t// },\n\t\thandleLoadData (item, callback) {\n\t\t\titem._loading = true;\n\t\t\tcityListApi(item.id).then(res=>{\n\t\t\t\t// item.children = res.data;\n\t\t\t\titem._loading = false;\n\t\t\t\tcallback(res.data);  \n\t\t\t});\n\t\t},\n\t\t// 删除\n\t\tdel(row, tit, num) {\n\t\t  let delfromData = {\n\t\t    title: tit,\n\t\t    num: num,\n\t\t    url: `setting/city/del/${row.id}`,\n\t\t    method: \"DELETE\",\n\t\t    ids: \"\",\n\t\t  };\n\t\t  this.$modalSure(delfromData)\n\t\t    .then((res) => {\n\t\t      this.$Message.success(res.msg);\n\t\t      this.cityLists.splice(num, 1);\n\t\t      this.getList(0);\n\t\t    })\n\t\t    .catch((res) => {\n\t\t      this.$Message.error(res.msg);\n\t\t    });\n\t\t},\n\t\t// 修改\n\t\tedit(id) {\n\t\t  this.$modalForm(cityApi(id)).then(() => this.getList(0));\n\t\t},\n\t\t// 添加\n\t\tadd(cityId) {\n\t\t  this.$modalForm(cityAddApi(cityId)).then(() => this.getList(0));\n\t\t},\t\n    // 清除缓存；\n    cleanCache() {\n      cityCleanCacheApi()\n        .then((res) => {\n          this.$Message.success(res.msg);\n        })\n        .catch((res) => {\n          this.$Message.success(res.msg);\n        });\n    } \n  },\n};\n",null]}