{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/work/channelCode/createCode.vue?vue&type=template&id=52b00dd2&scoped=true&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/work/channelCode/createCode.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["\n<div>\n  <div class=\"i-layout-page-header\">\n    <PageHeader class=\"product_tabs\" hidden-breadcrumb>\n      <div slot=\"title\">\n        <div class=\"float-l\">\n          <router-link :to=\"{ path: '/admin/work/channel_code' }\">\n            <div class=\"font-sm after-line\">\n              <span class=\"iconfont iconfanhui\"></span>\n              <span class=\"pl10\">返回</span>\n            </div>\n          </router-link>\n        </div>\n        <span class=\"mr20 ml16\">添加企业渠道码</span>\n      </div>\n    </PageHeader>\n  </div>\n  <Card :bordered=\"false\" dis-hover class=\"ivu-mt min-ht\">\n    <div class=\"acea-row row-center-wrapper\">\n      <div class=\"step_container\">\n        <Steps :current=\"current\">\n          <Step title=\"基础设置\"></Step>\n          <Step title=\"企微成员设置\"></Step>\n          <Step title=\"欢迎语设置\"></Step>\n        </Steps>\n      </div>\n    </div>\n    <div v-if=\"current == 0\">\n      <Form\n        ref=\"formItem\"\n        :model=\"formItem\"\n        :label-width=\"110\"\n        :label-colon=\"true\"\n        :rules=\"ruleValidate\"\n      >\n        <FormItem label=\"二维码名称\" prop=\"name\">\n          <Input\n            v-model=\"formItem.name\"\n            placeholder=\"请输入二维码名称\"\n           class=\"input-add\"\n          ></Input>\n        </FormItem>\n        <FormItem label=\"二维码分类\" prop=\"cate_id\">\n          <Select v-model=\"formItem.cate_id\" class=\"input-add\">\n            <Option\n              :value=\"item.id.toString()\"\n              v-for=\"(item, index) in channelCateList\"\n              :key=\"index\"\n              >{{ item.name }}</Option\n            >\n          </Select>\n        </FormItem>\n        <FormItem label=\"客户标签\" prop=\"label_id\">\n          <TreeSelect\n            v-model=\"formItem.label_id\"\n            :data=\"labelList\"\n            v-width=\"400\"\n            multiple\n          />\n        </FormItem>\n        <FormItem label=\"自动添加好友\">\n          <i-switch v-model=\"formItem.skip_verify\" size=\"large\"  :true-value=\"1\" :false-value=\"0\">\n            <span slot=\"open\">开启</span>\n            <span slot=\"close\">关闭</span>\n          </i-switch>\n          <div class=\"desc\">\n            开启时，客户添加时无需企业成员确认，自动成为好友\n          </div>\n        </FormItem>\n      </Form>\n    </div>\n    <div v-if=\"current == 1\">\n      <Form :model=\"formItem\" :label-width=\"110\" :label-colon=\"true\">\n        <FormItem label=\"类型\" prop=\"type\">\n          <RadioGroup v-model=\"formItem.type\" @on-change=\"changeType\">\n            <Radio label=\"0\">全天在线</Radio>\n            <Radio label=\"1\">自动上下线</Radio>\n          </RadioGroup>\n          <div class=\"desc\">\n            同一个二维码可选择多个客服成员进行接待，客户扫码后随机分配一名客服人员\n          </div>\n        </FormItem>\n        <template v-if=\"formItem.type == '0'\">\n          <FormItem label=\"添加成员\">\n              <Button icon=\"md-add\" @click=\"addUser('one')\">添加成员</Button>\n              <div class=\"mt10\">\n                  <Tag closable @on-close=\"handleDel\" :name=\"item.name\" size=\"large\" v-for=\"(item,index) in formItem.userList\" :key=\"index\">{{item.name}}</Tag>\n                  <!-- <Tag closable @on-close=\"handleDel\" size=\"large\" v-for=\"(item,index) in formItem.userList\" :key=\"index\">{{item.name}}</Tag> -->\n              </div>\n          </FormItem>\n        </template>\n        <template v-if=\"formItem.type == '1'\">\n          <div v-for=\"(item,index) in formItem.cycle\" :key=\"index\">\n            <FormItem>\n              <div class=\"cycle acea-row row-between\">\n                <span>周期{{index + 1}}</span>\n                <span class=\"danger_del\" @click=\"cycleDel(item)\">删除</span>\n              </div>\n              <div>\n                <div class=\"cycle_item\">\n                  <FormItem label=\"添加成员\">\n                      <Button icon=\"md-add\" @click=\"addUser('three',index)\">添加成员</Button>\n                       <div class=\"cycle_tag_content\">\n                          <div class=\"ivu-tag ivu-tag-size-large ivu-tag-default ivu-tag-closable ivu-tag-checked\"\n                          v-for=\"(item1,index1) in item.userids\" :key=\"index1\">\n                            <span class=\"ivu-tag-text\">{{item1.name}}</span>\n                            <i class=\"ivu-icon ivu-icon-ios-close\" @click=\"cycleItemDel(item1.name,index)\"></i>\n                          </div>\n                      </div>\n                  </FormItem>\n                </div>\n                <div class=\"cycle_item\">\n                  <FormItem label=\"工作周期\">\n                    <Select v-model=\"item.wokr_time\" multiple class=\"width-work\">\n                      <Option v-for=\"item in weekList\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\n                  </Select>\n                  </FormItem>\n                </div>\n                <div class=\"cycle_item\">\n                  <FormItem label=\"上班时间\">\n                    <TimePicker\n                     v-model=\"item.workTime\"\n                      type=\"timerange\"\n                      format=\"HH:mm\"\n                      placement=\"bottom-end\"\n                      placeholder=\"请选择上班时间\"\n                      class=\"width-work\"\n                    ></TimePicker>\n                  </FormItem>\n                </div>\n              </div>\n            </FormItem>\n          </div>\n        </template>\n        <FormItem v-if=\"formItem.type == '1'\">\n          <Button type=\"primary\" @click=\"pushCycle()\">添加工作周期</Button>\n        </FormItem>\n        <FormItem label=\"员工添加上限\" >\n              <i-switch v-model=\"formItem.add_upper_limit\" size=\"large\" :true-value=\"1\" :false-value=\"0\">\n              <span slot=\"open\">开启</span>\n              <span slot=\"close\">关闭</span>\n              </i-switch>\n          </FormItem>\n          <FormItem v-if=\"formItem.useridLimit.length && formItem.add_upper_limit\">\n             <Table border :columns=\"reserveUser\" :data=\"formItem.useridLimit\" width=\"254\" size=\"small\">\n                  <template slot-scope=\"{ row }\" slot=\"name\">\n                     <!-- <Input v-model=\"row.name\" @on-change=\"setData($event, index, 'max')\"></Input> -->\n                     <span>{{row.name}}</span>\n                 </template>\n                 <template slot-scope=\"{ row,index }\" slot=\"max\">\n                     <Input v-model=\"row.max\" type=\"number\" @on-change=\"setData($event, index, 'max')\"></Input>\n                 </template>\n             </Table>\n          </FormItem>\n           <FormItem label=\"备用员工\" required>\n              <Button icon=\"md-add\" @click=\"addUser('two')\">添加成员</Button>\n               <div class=\"mt10\">\n                  <Tag closable @on-close=\"handleClose(index)\" :name=\"item.name\" size=\"large\" v-for=\"(item,index) in formItem.reserve_userid\" :key=\"index\">{{item.name}}</Tag>\n              </div>\n          </FormItem>\n      </Form>\n    </div>\n    <div v-if=\"current == 2\">\n      <Form :model=\"formItem\" :label-width=\"110\" :label-colon=\"true\">\n        <FormItem label=\"开关\" prop=\"type\">\n          <RadioGroup v-model=\"formItem.welcome_type\">\n            <Radio label=\"0\">渠道欢迎语</Radio>\n            <Radio label=\"1\">默认欢迎语</Radio>\n          </RadioGroup>\n           <div class=\"desc\">\n            关闭后，客户扫该渠道活码，依然可对该客户自动打标签，但仅收到系统的【欢迎语】消息\n          </div>\n        </FormItem>\n        <template v-if=\"formItem.welcome_type == '0'\">\n          <FormItem label=\"欢迎语内容\">\n          <Input\n           v-model=\"formItem.welcome_words.text.content\"\n            type=\"textarea\"\n            :rows=\"4\"\n            style=\"width: 460px\"\n          />\n        </FormItem>\n        <FormItem>\n          <Button type=\"primary\" ghost @click=\"insertName()\">插入客户名称</Button>\n          <div class=\"desc\">\n            可以插入客户名称，在发送给客户之前系统会自动解析成客户的名称\n          </div>\n        </FormItem>\n        <FormItem>\n          <Poptip trigger=\"hover\">\n            <template slot=\"content\">\n              <div class=\"poptip_content\">\n                <div @click=\"modalPicTap('image')\">\n                  <div class=\"add_img acea-row row-center-wrapper\">\n                    <span class=\"iconfont icontupian4\"></span>\n                  </div>\n                  <span class=\"tip_tit\">图片</span>\n                </div>\n                <div @click=\"addRoutine()\">\n                  <div class=\"add_routine acea-row row-center-wrapper\">\n                    <span class=\"iconfont iconxiaochengxu\"></span>\n                  </div>\n                  <span class=\"tip_tit\">小程序</span>\n                </div>\n              </div>\n            </template>\n            <Button type=\"success\">添加图片/小程序</Button>\n          </Poptip>\n        </FormItem>\n        <FormItem>\n           <div v-for=\"(item,index) in formItem.welcome_words.attachments\" :key=\"index\">\n             <div class=\"ivu-tag ivu-tag-dot ivu-tag-size-default ivu-tag-closable ivu-tag-checked\" >\n               <span v-if=\"item.msgtype == 'image'\" class=\"iconfont icontupian4 tag_icon\"></span>\n               <span v-if=\"item.msgtype == 'miniprogram'\" class=\"iconfont iconxiaochengxu tag_icon\"></span>\n               <span v-if=\"item.msgtype == 'image'\" class=\"ivu-tag-text\">{{item.image.pic_url}}</span>\n               <span v-if=\"item.msgtype == 'miniprogram'\" class=\"ivu-tag-text\">{{item.miniprogram.title}}</span>\n               <i v-if=\"item.msgtype == 'image'\" class=\"ivu-icon ivu-icon-ios-close\" @click=\"wordsDel(item.image.pic_url)\"></i>\n               <i v-if=\"item.msgtype == 'miniprogram'\" class=\"ivu-icon ivu-icon-ios-close\" @click=\"wordsDel(item.miniprogram.title)\"></i>\n             </div>\n           </div>\n        </FormItem>\n        </template>\n        <FormItem label=\"状态\">\n          <i-switch v-model=\"formItem.status\" size=\"large\" :true-value=\"1\" :false-value=\"0\">\n            <span slot=\"open\">开启</span>\n            <span slot=\"close\">关闭</span>\n          </i-switch>\n        </FormItem>\n      </Form>\n    </div>\n  </Card>\n  <Card :bordered=\"false\" dis-hover class=\"fixed-card\" :style=\"{left: `${!menuCollapse?'200px':isMobile?'0':'80px'}`}\">\n    <div class=\"acea-row row-center-wrapper\">\n      <Button @click=\"back()\" v-show=\"current > 0\">上一步</Button>\n      <Button\n        type=\"primary\"\n        @click=\"next('formItem')\"\n        v-show=\"current < 2\"\n        class=\"step_btn\"\n        >下一步</Button\n      >\n      <Button\n        type=\"primary\"\n        @click=\"submit()\"\n        v-show=\"current == 2\"\n        class=\"step_btn\"\n        >提交</Button\n      >\n    </div>\n  </Card>\n  <Modal\n    v-model=\"modalPic\"\n    width=\"960px\"\n    scrollable\n    footer-hide\n    closable\n    title=\"logo\"\n    :mask-closable=\"false\"\n    :z-index=\"9\"\n  >\n    <uploadPictures\n      :isChoice=\"isChoice\"\n      @getPic=\"getPic\"\n      :gridBtn=\"gridBtn\"\n      :gridPic=\"gridPic\"\n      v-if=\"modalPic\"\n    ></uploadPictures>\n  </Modal>\n  <Modal\n    v-model=\"modalRoutine\"\n    title=\"添加小程序消息\"\n    @on-ok=\"routineConfirm\"\n    :z-index=\"1\"\n  >\n    <Form :model=\"formItem\" :label-width=\"110\">\n      <FormItem label=\"封面图:\">\n        <div class=\"picBox\" @click=\"modalPicTap('routine')\">\n          <div class=\"pictrue\" v-if=\"rontineObj.miniprogram.pic_url\">\n            <img v-lazy=\"rontineObj.miniprogram.pic_url\"></div>\n          <div class=\"upLoad\" v-else>\n            <div class=\"iconfont\">+</div>\n          </div>\n        </div>\n      </FormItem>\n      <FormItem label=\"小程序消息标题:\">\n        <Input v-model=\"rontineObj.miniprogram.title\"></Input>\n      </FormItem>\n      <FormItem label=\"小程序Appid:\">\n        <Input v-model=\"rontineObj.miniprogram.appid\"></Input>\n      </FormItem>\n      <FormItem label=\"小程序功能页:\">\n        <Input v-model=\"rontineObj.miniprogram.page\"></Input>\n      </FormItem>\n    </Form>\n  </Modal>\n\n    <department\n      ref=\"department\"\n      :active-department=\"activeDepartment\"\n      :is-site=\"isSite\"\n      :userList=\"userList\"\n      :only-department=\"onlyDepartment\"\n      @changeMastart=\"changeMastart\"\n    />\n</div>\n",null]}