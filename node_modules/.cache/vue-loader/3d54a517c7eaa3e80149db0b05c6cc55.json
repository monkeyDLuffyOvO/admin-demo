{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/setting/clerkList/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/setting/clerkList/index.vue","mtime":1652772673000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from \"vuex\";\nimport {\n  storeStaffApi,\n  storeStaffCreateApi,\n  merchantStoreListApi,\n  storeStaffSetShowApi,\n  storeStaffEditApi,\n} from \"@/api/setting\";\nexport default {\n  name: \"setting_staff\",\n  components: {},\n  computed: {\n    ...mapState(\"admin/layout\", [\"isMobile\"]),\n    ...mapState(\"admin/userLevel\", [\"categoryId\"]),\n    labelWidth() {\n      return this.isMobile ? undefined : 85;\n    },\n    labelPosition() {\n      return this.isMobile ? \"top\" : \"right\";\n    },\n  },\n  data() {\n    return {\n      grid: {\n        xl: 10,\n        lg: 10,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      artFrom: {\n        page: 1,\n        limit: 15,\n        store_id: 0,\n      },\n      loading: false,\n      columns: [\n        {\n          title: \"ID\",\n          key: \"id\",\n          width: 80,\n          sortable: true,\n        },\n        {\n          title: \"微信名称\",\n          key: \"nickname\",\n          minWidth: 100,\n        },\n        {\n          title: \"头像\",\n          slot: \"avatar\",\n          minWidth: 100,\n        },\n        {\n          title: \"核销员名称\",\n          key: \"staff_name\",\n          minWidth: 100,\n        },\n        {\n          title: \"所属提货点\",\n          key: \"name\",\n          minWidth: 100,\n        },\n        {\n          title: \"添加时间\",\n          key: \"add_time\",\n          minWidth: 100,\n        },\n        {\n          title: \"状态\",\n          slot: \"status\",\n          minWidth: 100,\n        },\n        {\n          title: \"操作\",\n          slot: \"action\",\n          // fixed: \"right\",\n          minWidth: 120,\n        },\n      ],\n      storeLists: [],\n      storeSelectList: [],\n      total: 0,\n    };\n  },\n  mounted() {\n    this.getList();\n    this.storeList();\n  },\n  methods: {\n    storeList() {\n      let that = this;\n      merchantStoreListApi().then((res) => {\n        that.storeSelectList = res.data;\n      });\n    },\n    getList() {\n      let that = this;\n      that.loading = true;\n      storeStaffApi(that.artFrom)\n        .then((res) => {\n          that.loading = false;\n          that.storeLists = res.data.list;\n          that.total = res.data.count;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 搜索；\n    userSearchs() {\n      this.artFrom.page = 1;\n      this.getList();\n    },\n    pageChange(index) {\n      this.artFrom.page = index;\n      this.getList();\n    },\n    // 删除\n    del(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `merchant/store_staff/del/${row.id}`,\n        method: \"DELETE\",\n        ids: \"\",\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.storeLists.splice(num, 1);\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 添加核销员；\n    add() {\n      this.$modalForm(storeStaffCreateApi(0)).then(() => this.getList());\n    },\n    onchangeIsShow(id, is_show) {\n      let that = this;\n      storeStaffSetShowApi(id, is_show).then((res) => {\n        that.$Message.success(res.msg);\n        that.getList();\n      });\n    },\n    edit(id) {\n      this.$modalForm(storeStaffEditApi(id)).then(() => this.getList());\n    },\n  },\n};\n",null]}