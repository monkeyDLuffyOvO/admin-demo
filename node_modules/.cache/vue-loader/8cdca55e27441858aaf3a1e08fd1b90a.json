{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/marketing/lottery/create.vue?vue&type=template&id=fb4da6e2&scoped=true&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/marketing/lottery/create.vue","mtime":1658975056000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["\n<!-- 营销-抽奖配置 -->\n  <div class=\"form-submit\">\n    <!-- <div class=\"i-layout-page-header\">\n      <PageHeader\n        class=\"product_tabs\"\n        :title=\"$route.meta.title\"\n        hidden-breadcrumb\n      ></PageHeader>\n    </div> -->\n    <Card\n      :bordered=\"false\"\n      dis-hover\n      class=\"ivu-mt mb79\"\n    >\n      <div class=\"new_tab\">\n        <!-- 顶部Tab栏切换 -->\n        <Tabs v-model=\"formValidate.factor\" @on-click=\"lotteryType\">\n          <TabPane\n            v-for=\"(item, index) in headTab\"\n            :key=\"index\"\n            :label=\"item.name\"\n            :name=\"item.type\"\n          ></TabPane>\n        </Tabs>\n      </div>\n      <Row type=\"flex\">\n        <!-- <Col span=\"20\">\n          <Steps :current=\"current\">\n            <Step title=\"抽奖活动创建\"></Step>\n            <Step title=\"活动奖品设置\"></Step>\n            <Step title=\"活动设置完成\"></Step>\n          </Steps>\n        </Col> -->\n        <Col span=\"23\">\n          <Form\n            class=\"form mt30\"\n            ref=\"formValidate\"\n            :rules=\"ruleValidate\"\n            :model=\"formValidate\"\n            :label-width=\"labelWidth\"\n            :label-position=\"labelPosition\"\n            @submit.native.prevent\n          >\n            <Row type=\"flex\">\n              <Col span=\"24\">\n                <FormItem label=\"活动名称：\" prop=\"name\" label-for=\"name\">\n                  <Input\n                    class=\"perW30\"\n                    placeholder=\"请输入活动名称\"\n                    element-id=\"name\"\n                    v-model=\"formValidate.name\"\n                  />\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"活动时间：\" prop=\"period\">\n                  <div class=\"acea-row row-middle\">\n                    <DatePicker\n                      :editable=\"false\"\n                      type=\"datetimerange\"\n                      format=\"yyyy-MM-dd HH:mm\"\n                      placeholder=\"请选择活动时间\"\n                      @on-change=\"onchangeTime\"\n                      class=\"perW30\"\n                      v-model=\"formValidate.period\"\n                    ></DatePicker>\n                  </div>\n                </FormItem>\n              </Col>\n              <!--   <Col span=\"24\">\n                <FormItem label=\"活动类型：\" prop=\"factor\" label-for=\"factor\">\n                  <RadioGroup element-id=\"factor\" v-model=\"formValidate.factor\">\n                    <Radio :label=\"1\" class=\"radio\">积分抽取</Radio>\n                    <Radio :label=\"3\">订单支付</Radio>\n                    <Radio :label=\"4\">订单评价</Radio>\n                    <Radio :label=\"5\">关注公众号</Radio>\n                  </RadioGroup>\n                </FormItem>\n              </Col> -->\n              <Col span=\"24\">\n                <FormItem\n                  label=\"参与用户：\"\n                  prop=\"attends_user\"\n                  label-for=\"attends_user\"\n                >\n                  <RadioGroup\n                    element-id=\"attends_user\"\n                    v-model=\"formValidate.attends_user\"\n                  >\n                    <Radio :label=\"1\" class=\"radio\">全部用户</Radio>\n                    <Radio :label=\"2\">部分用户</Radio>\n                  </RadioGroup>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.attends_user == 2\">\n                <FormItem\n                  label=\"\"\n                  :prop=\"formValidate.attends_user == 2 ? 'user_level' : ''\"\n                >\n                  <div class=\"acea-row row-middle\">\n                    <Select\n                      multiple\n                      v-model=\"formValidate.user_level\"\n                      class=\"perW30\"\n                      placeholder=\"请选择用户等级\"\n                    >\n                      <Option\n                        v-for=\"item in userLevelListApi\"\n                        :value=\"String(item.id)\"\n                        :key=\"item.id\"\n                        >{{ item.name }}</Option\n                      >\n                    </Select>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.attends_user == 2\">\n                <FormItem\n                  label=\"\"\n                  :prop=\"formValidate.attends_user == 2 ? 'is_svip' : ''\"\n                >\n                  <div class=\"acea-row row-middle\">\n                    <Select\n                      v-model=\"formValidate.is_svip\"\n                      class=\"perW30\"\n                      clearable\n                      placeholder=\"请选择是否是付费会员\"\n                    >\n                      <Option\n                        v-for=\"item in templateList\"\n                        :value=\"item.id\"\n                        :key=\"item.id\"\n                        >{{ item.name }}</Option\n                      >\n                    </Select>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.attends_user == 2\">\n                <FormItem\n                  label=\"\"\n                  :prop=\"formValidate.attends_user == 2 ? 'user_label' : ''\"\n                >\n            <!--      <div class=\"acea-row row-middle\">\n                    <Select\n                      multiple\n                      v-model=\"formValidate.user_label\"\n                      class=\"perW30\"\n                      placeholder=\"请选择用户标签\"\n                    >\n                      <Option\n                        v-for=\"item in userLabelList\"\n                        :value=\"String(item.id)\"\n                        :key=\"item.id\"\n                        >{{ item.label_name }}</Option\n                      >\n                    </Select>\n                  </div> -->\n\t\t\t\t\t\t\t\t\t<div class=\"labelInput acea-row row-between-wrapper\" @click=\"openLabel\">\n\t\t\t\t\t\t\t\t\t\t<div style=\"width: 90%;\">\n\t\t\t\t\t\t\t\t\t\t\t<div v-if=\"dataLabel.length\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Tag closable v-for=\"(item,index) in dataLabel\" @on-close=\"closeLabel(item)\">{{item.label_name}}</Tag>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"span\" v-else>选择用户关联标签</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"iconfont iconxiayi\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n                  <div class=\"ml100 grey\">\n                    三个条件都设置后,必须这些条件都满足的用户才能参加抽奖\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.factor == 5\">\n                <FormItem\n                  label=\"抽奖次数：\"\n                  :prop=\"formValidate.factor == 5 ? 'lottery_num_term' : ''\"\n                  label-for=\"status\"\n                >\n                  <RadioGroup\n                    element-id=\"lottery_num_term\"\n                    v-model=\"formValidate.lottery_num_term\"\n                  >\n                    <Radio :label=\"1\" class=\"radio\">每天N次</Radio>\n                    <Radio :label=\"2\">每人N次</Radio>\n                  </RadioGroup>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.factor == 5\">\n                <FormItem\n                  label=\"邀请新用户最多可获得抽奖\"\n                  :prop=\"formValidate.factor == 5 ? 'lottery_num' : ''\"\n                  label-for=\"lottery_num\"\n                >\n                  <div class=\"acea-row row-middle\">\n                    <div class=\"mr10 grey\"></div>\n                    <InputNumber\n                      placeholder=\"\"\n                      element-id=\"lottery_num\"\n                      :min=\"1\"\n                      :precision=\"0\"\n                      v-model=\"formValidate.lottery_num\"\n                      class=\"perW20\"\n                    />\n                    <div class=\"ml10 grey\">次</div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.factor == 5\">\n                <FormItem\n                  label=\"邀请一位新用户关注公众号可获得抽奖\"\n                  :prop=\"formValidate.factor == 5 ? 'spread_num' : ''\"\n                  label-for=\"spread_num\"\n                >\n                  <div class=\"acea-row row-middle\">\n                    <div class=\"mr10 grey\"></div>\n                    <InputNumber\n                      placeholder=\"\"\n                      element-id=\"spread_num\"\n                      :min=\"1\"\n                      :precision=\"0\"\n                      v-model=\"formValidate.spread_num\"\n                      class=\"perW20\"\n                    />\n                    <div class=\"ml10 grey\">次</div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col\n                span=\"24\"\n                v-if=\"\n                  formValidate.factor == 1 ||\n                  formValidate.factor == 3 ||\n                  formValidate.factor == 4\n                \"\n                key=\"factor_num\"\n              >\n                <FormItem\n                  :label=\"\n                    formValidate.factor == 1\n                      ? '单次抽奖消耗积分：'\n                      : '抽奖次数：'\n                  \"\n                  :prop=\"\n                    formValidate.factor == 1 ||\n                    formValidate.factor == 3 ||\n                    formValidate.factor == 4\n                      ? 'factor_num'\n                      : ''\n                  \"\n                  label-for=\"factor_num\"\n                >\n                  <div class=\"acea-row row-middle\">\n                    <div class=\"mr10 grey\"></div>\n                    <InputNumber\n                      placeholder=\"\"\n                      element-id=\"factor_num\"\n                      :min=\"1\"\n                      :precision=\"0\"\n                      v-model=\"formValidate.factor_num\"\n                      class=\"perW20\"\n                    />\n                    <div class=\"ml10 grey\" v-if=\"formValidate.factor != 1\">\n                      次\n                    </div>\n                  </div>\n                </FormItem>\n              </Col>\n            </Row>\n            <Row>\n              <Col span=\"24\">\n                <FormItem label=\"规则选择：\" prop=\"prize\">\n                  <Table\n                    :data=\"specsData\"\n                    :columns=\"columns\"\n                    border\n                    :draggable=\"true\"\n                    @on-drag-drop=\"onDragDrop\"\n                  >\n                    <template slot-scope=\"{ row, index }\" slot=\"image\">\n                      <div\n                        class=\"acea-row row-middle row-center-wrapper\"\n                        @click=\"modalPicTap('dan', 'goods', index)\"\n                      >\n                        <div class=\"pictrue pictrueTab\" v-if=\"row.image\">\n                          <img v-lazy=\"row.image\" />\n                        </div>\n                        <div\n                          class=\"upLoad pictrueTab acea-row row-center-wrapper\"\n                          v-else\n                        >\n                          <Icon\n                            type=\"ios-camera-outline\"\n                            size=\"21\"\n                            class=\"iconfonts\"\n                          />\n                        </div>\n                      </div>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"total\">\n                      <InputNumber\n                        v-model=\"row.total\"\n                        :max=\"99999\"\n                        :min=\"0\"\n                        :precision=\"0\"\n                        class=\"priceBox\"\n                        @on-change=\"\n                          (data) => {\n                            changeTotal(data, index);\n                          }\n                        \"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"chance\">\n                      <InputNumber\n                        v-model=\"row.chance\"\n                        :max=\"100\"\n                        :min=\"0\"\n                        :precision=\"0\"\n                        class=\"priceBox\"\n                        @on-change=\"\n                          (data) => {\n                            changeChance(data, index);\n                          }\n                        \"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"type\">\n                      <div>{{ row.type | typeName }}</div>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"setting\">\n                      <Button\n                        class=\"submission\"\n                        type=\"text\"\n                        style=\"\n                          background-color: transparent;\n                          box-shadow: none;\n                          color: #1890ff;\n                        \"\n                        @click=\"editGoods(index)\"\n                        >编辑</Button\n                      >\n                      <!-- <Button\n                        v-if=\"row.type !== 1\"\n                        class=\"submission mr15\"\n                        @click=\"deleteGoods(index)\"\n                        >删除</Button\n                      > -->\n                    </template>\n                  </Table>\n                  <Button\n                    v-if=\"specsData.length < 8\"\n                    type=\"primary\"\n                    class=\"submission mr15 mt20\"\n                    @click=\"addGoods\"\n                    >添加商品</Button\n                  >\n                </FormItem>\n                <FormItem>\n                  <div class=\"pl60 grey\">\n                    奖品必须设置为8个，列表中拖拽可调整奖品在九宫中的位置\n                    <Poptip placement=\"bottom\" width=\"380\">\n                      <a>查看位置示例图</a>\n                      <div class=\"api\" slot=\"content\">\n                        <img\n                          src=\"../../../assets/images/lotteryTest.png\"\n                          alt=\"\"\n                        />\n                      </div>\n                    </Poptip>\n                  </div>\n                </FormItem>\n              </Col>\n            </Row>\n            <div>\n              <FormItem\n                v-if=\"formValidate.factor != 3 && formValidate.factor != 4\"\n                :prop=\"\n                  formValidate.factor != 3 && formValidate.factor != 4\n                    ? 'image'\n                    : ''\n                \"\n              >\n                <div class=\"custom-label\" slot=\"label\">\n                  <div>\n                    <div>活动背景图</div>\n                    <!-- <div>(750*750)</div> -->\n                  </div>\n                  <div>：</div>\n                </div>\n                <div class=\"acea-row\">\n                  <div class=\"pictrue\" v-if=\"formValidate.image\">\n                    <img v-lazy=\"formValidate.image\" />\n                    <Button\n                      shape=\"circle\"\n                      icon=\"md-close\"\n                      @click.native=\"handleRemove()\"\n                      class=\"btndel\"\n                    ></Button>\n                  </div>\n                  <div\n                    v-else\n                    class=\"upLoad acea-row row-center-wrapper\"\n                    @click=\"modalPicTap('dan', 'danFrom')\"\n                  >\n                    <Icon\n                      type=\"ios-camera-outline\"\n                      size=\"26\"\n                      class=\"iconfonts\"\n                    />\n                  </div>\n                </div>\n                <div\n                  style=\"\n                    margin-top: 14px;\n                    font-size: 12px;\n                    line-height: 12px;\n                    color: #999999;\n                  \"\n                >\n                  建议尺寸：750*750\n                </div>\n              </FormItem>\n              <FormItem\n                v-if=\"formValidate.factor != 3 && formValidate.factor != 4\"\n                label=\"中奖名单：\"\n                :prop=\"\n                  formValidate.factor != 3 && formValidate.factor != 4\n                    ? 'is_all_record'\n                    : ''\n                \"\n                label-for=\"is_all_record\"\n              >\n                <!-- <RadioGroup\n                  element-id=\"is_all_record\"\n                  v-model=\"formValidate.is_all_record\"\n                >\n                  <Radio :label=\"0\">关闭</Radio>\n                  <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                </RadioGroup> -->\n                <i-switch\n                  v-model=\"formValidate.is_all_record\"\n                  :true-value=\"1\"\n                  :false-value=\"0\"\n                  element-id=\"is_all_record\"\n                  size=\"large\"\n                >\n                  <span slot=\"open\">开启</span>\n                  <span slot=\"close\">关闭</span>\n                </i-switch>\n              </FormItem>\n              <FormItem\n                v-if=\"formValidate.factor != 3 && formValidate.factor != 4\"\n                label=\"个人中奖记录：\"\n                :prop=\"\n                  formValidate.factor != 3 && formValidate.factor != 4\n                    ? 'is_personal_record'\n                    : ''\n                \"\n                label-for=\"is_personal_record\"\n              >\n                <!-- <RadioGroup\n                  element-id=\"is_personal_record\"\n                  v-model=\"formValidate.is_personal_record\"\n                >\n                  <Radio :label=\"0\">关闭</Radio>\n                  <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                </RadioGroup> -->\n                <i-switch\n                  v-model=\"formValidate.is_personal_record\"\n                  :true-value=\"1\"\n                  :false-value=\"0\"\n                  element-id=\"is_personal_record\"\n                  size=\"large\"\n                >\n                  <span slot=\"open\">开启</span>\n                  <span slot=\"close\">关闭</span>\n                </i-switch>\n              </FormItem>\n              <FormItem\n                v-if=\"formValidate.factor != 3 && formValidate.factor != 4\"\n                label=\"活动规则：\"\n                prop=\"is_content\"\n                label-for=\"is_content\"\n              >\n                <!-- <RadioGroup\n                  element-id=\"is_content\"\n                  v-model=\"formValidate.is_content\"\n                >\n                  <Radio :label=\"0\">关闭</Radio>\n                  <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                </RadioGroup> -->\n                <i-switch\n                  v-model=\"formValidate.is_content\"\n                  :true-value=\"1\"\n                  :false-value=\"0\"\n                  element-id=\"is_content\"\n                  size=\"large\"\n                >\n                  <span slot=\"open\">开启</span>\n                  <span slot=\"close\">关闭</span>\n                </i-switch>\n              </FormItem>\n              <FormItem\n                label=\"\"\n                :prop=\"\n                  formValidate.factor != 3 &&\n                  formValidate.factor != 4 &&\n                  formValidate.is_content == 1\n                    ? 'content'\n                    : ''\n                \"\n                v-if=\"\n                  formValidate.factor != 3 &&\n                  formValidate.factor != 4 &&\n                  formValidate.is_content == 1\n                \"\n              >\n                <WangEditor\n                  style=\"width: 90%\"\n                  :content=\"formValidate.content\"\n                  @editorContent=\"getEditorContent\"\n                ></WangEditor>\n              </FormItem>\n              <FormItem label=\"活动状态：\" prop=\"status\" label-for=\"status\">\n                <!-- <RadioGroup element-id=\"status\" v-model=\"formValidate.status\">\n                  <Radio :label=\"0\">关闭</Radio>\n                  <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                </RadioGroup> -->\n                <i-switch\n                  v-model=\"formValidate.status\"\n                  :true-value=\"1\"\n                  :false-value=\"0\"\n                  element-id=\"status\"\n                  size=\"large\"\n                >\n                  <span slot=\"open\">开启</span>\n                  <span slot=\"close\">关闭</span>\n                </i-switch>\n              </FormItem>\n            </div>\n            <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n          </Form>\n        </Col>\n      </Row>\n    </Card>\n    <Card :bordered=\"false\" dis-hover class=\"fixed-card\" :style=\"{left: `${!menuCollapse?'200px':isMobile?'0':'80px'}`}\">\n\t\t\t<Form>\n        <FormItem class=\"submit-form-item\">\n          <Button\n            type=\"primary\"\n            class=\"submission\"\n            :loading=\"submitOpen\"\n            @click=\"next('formValidate')\"\n          >\n            <div v-if=\"!submitOpen\">提交</div>\n            <div v-else>提交中</div>\n          </Button>\n        </FormItem>\n\t\t\t</Form>\n\t\t</Card>\t\n\t\t<!-- 用户标签 -->\n\t\t<Modal\n\t\t  v-model=\"labelShow\"\n\t\t  scrollable\n\t\t  title=\"请选择用户标签\"\n\t\t  :closable=\"false\"\n\t\t  width=\"320\"\n\t\t  :footer-hide=\"true\"\n\t\t\t:mask-closable=\"false\"\n\t\t>\n\t\t  <userLabel ref=\"userLabel\" @activeData=\"activeData\" @close=\"labelClose\"></userLabel>\n\t\t</Modal>\n    <!-- 上传图片-->\n    <Modal\n      v-model=\"modalPic\"\n      width=\"960px\"\n      scrollable\n      footer-hide\n      closable\n      title=\"上传商品图\"\n      :mask-closable=\"false\"\n      :z-index=\"1\"\n    >\n      <uploadPictures\n        :isChoice=\"isChoice\"\n        @getPic=\"getPic\"\n        v-if=\"modalPic\"\n      ></uploadPictures>\n    </Modal>\n    <!-- 上传图片-->\n    <Modal\n      v-model=\"addGoodsModel\"\n      width=\"60%\"\n      scrollable\n      footer-hide\n      closable\n      :title=\"title\"\n      :mask-closable=\"false\"\n      :z-index=\"1\"\n    >\n      <addGoods\n        v-if=\"addGoodsModel\"\n        @addGoodsData=\"addGoodsData\"\n        :editData=\"editData\"\n      ></addGoods>\n    </Modal>\n  </div>\n",null]}