{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/notify/smsPay/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/notify/smsPay/index.vue","mtime":1649411723000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { smsPriceApi, payCodeApi, isLoginApi, serveInfoApi } from '@/api/setting';\nexport default {\n    name: 'smsPay',\n    data () {\n        return {\n            all: { 'sms': '短信', 'copy': '商品采集', 'expr_query': '物流查询', 'expr_dump': '电子面单打印' },\n            isChecked: 'sms',\n            numbers: '',\n            account: '',\n            list: [],\n            current: 0,\n            checkList: {},\n            spinShow: false,\n            code: {}\n        }\n    },\n    created () {\n        this.isChecked = this.$route.query.type;\n        this.onIsLogin();\n    },\n    methods: {\n        // 查看是否登录\n        onIsLogin () {\n            this.spinShow = true;\n            isLoginApi().then(async res => {\n                let data = res.data;\n                if (!data.status) {\n                    this.$Message.warning('请先登录');\n                    this.$router.push('/admin/setting/sms/sms_config/index?url=' + this.$route.path);\n                } else {\n                    this.getServeInfo();\n                    this.getPrice();\n                }\n            }).catch(res => {\n                this.$Message.error(res.msg);\n            })\n        },\n        // 平台用户信息\n        getServeInfo () {\n            serveInfoApi().then(async res => {\n                let data = res.data;\n                switch (this.isChecked) {\n                case 'sms':\n                    this.numbers = data.sms.num\n                    break;\n                case 'copy':\n                    this.numbers = data.copy.num\n                    break;\n                case 'expr_dump':\n                    this.numbers = data.dump.num\n                    break;\n                default:\n                    this.numbers = data.query.num\n                    break;\n                }\n            }).catch(res => {\n                this.$Message.error(res.msg);\n            })\n        },\n        onChangeType (val) {\n            this.current = 0;\n            this.getPrice();\n            this.getServeInfo();\n        },\n        // 支付套餐\n        getPrice () {\n            this.spinShow = true;\n            smsPriceApi({ type: this.isChecked }).then(async res => {\n                setTimeout(() => {\n                    this.spinShow = false;\n                }, 800);\n                let data = res.data;\n                this.list = data.data;\n                this.checkList = this.list[0];\n                this.getCode(this.checkList);\n            }).catch(res => {\n                this.spinShow = false;\n                this.$Message.error(res.msg);\n                this.list = [];\n            })\n        },\n        // 选中\n        check (item, index) {\n            this.spinShow = true;\n            this.current = index;\n            setTimeout(() => {\n                this.getCode(item);\n                this.checkList = item;\n                this.spinShow = false;\n            }, 800);\n        },\n        // 支付码\n        getCode (item) {\n            let data = {\n                pay_type: 'weixin',\n                meal_id: item.id,\n                price: item.price,\n                num: item.num,\n                type: item.type\n            };\n            payCodeApi(data).then(async res => {\n                this.code = res.data;\n            }).catch(res => {\n                this.code = '';\n                this.$Message.error(res.msg);\n            })\n        }\n    }\n}\n",null]}