{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/components/wangEditor/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/components/wangEditor/index.vue","mtime":1652232731000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport monaco from \"./monaco\";\nimport E from \"wangeditor\";\nimport AlertMenu from \"./editor\";\nimport HtmlMenu from \"./html\";\nimport uploadPictures from \"@/components/uploadPictures\";\nimport uploadVideo from \"@/components/uploadVideos\";\n\nimport util from '../../utils/bus'\nexport default {\n  name: \"Index\",\n  components: {\n    uploadPictures,\n    uploadVideo,\n    monaco,\n  },\n  props: {\n    content: {\n      type: String,\n      default: \"\",\n    },\n  },\n\n  data() {\n    return {\n      monacoBox: false,\n      value: \"\",\n      modalPic: false,\n      isChoice: \"多选\",\n      picTit: \"danFrom\",\n      img: \"\",\n      modalVideo: false,\n      editor: null,\n      uploadSize: 2,\n      video: \"\",\n\t\t\tnewHtml:''\n      // header: {\n      //   \"Authori-zation\": \"Bearer \" + getCookies(\"token\"),\n      // },\n    };\n  },\n  computed: {\n      initEditor () {\n          return this.content && this.editor;\n      }\n  },\n  watch: {\n    // content: function (val) {\n    //   if (val !== \"\") {\n    //     this.editor.txt.html(val);\n    //   } else {\n    //     this.editor.txt.clear();\n    //   }\n    // },\n    initEditor (val) {\n        if (val) {\n            this.editor.txt.html(this.content);\n        }\n    }\n  },\n  created() {\n    // window.getvideoint = this.getvideoint;\n    // window.getHtmlint = this.getHtmlint;\n    \n  },\n  mounted() {\n    this.createEditor();\n    util.$on('Video',(Video)=>{\n        this.getvideoint();\n    })\n       util.$on('Html',(Html)=>{\n        this.getHtmlint();\n    })\n\n  },\n\n  methods: {\n    changeValue(value) {\n      this.newHtml = value;\n      this.$emit(\"editorContent\", value);\n\n      this.$emit(\"input\", value);\n    },\n    // 获取多张图信息\n    getPic(pc) {\n      let _this = this;\n      _this.img = pc.att_dir;\n      _this.modalPic = false;\n      this.editor.cmd.do(\n        \"insertHTML\",\n        `<img src=\"${_this.img}\" style=\"max-width:100%;\"/>`\n      );\n    },\n    getimg() {\n      this.modalPic = true;\n      this.isChoice = \"多选\";\n    },\n    getvideoint() {\n      this.modalVideo = true;\n    },\n    getHtmlint() {\n      this.monacoBox = !this.monacoBox;\n      this.value = this.newHtml;\n      if (!this.monacoBox) {\n        this.editor.txt.html(this.newHtml);\n      }\n    },\n    getPicD(data) {\n      let _this = this;\n      _this.modalPic = false;\n      data.map((d) => {\n        this.editor.cmd.do(\n          \"insertHTML\",\n          `<img src=\"${d.att_dir}\" style=\"max-width:100%;\"/>`\n        );\n      });\n    },\n    getvideo(data) {\n      let _this = this;\n      _this.modalVideo = false;\n      this.video = data;\n      this.editor.cmd.do(\n        \"insertHTML\",\n        `<video src=\"${_this.video}\" controls style=\"max-width:100%;\"/>`\n      );\n    },\n\n    createEditor() {\n      let _this = this;\n      const menuKey = \"alertMenuKey\";\n      const html = \"alertHtml\";\n      this.editor = new E(this.$refs[\"wang-editor\"]);\n\n      this.editor.menus.extend(menuKey, AlertMenu);\n      this.editor.menus.extend(html, HtmlMenu);\n      this.editor.config.menus = this.editor.config.menus.concat(html);\n      this.editor.config.menus = this.editor.config.menus.concat(menuKey);\n      this.editor.config.uploadImgFromMedia = function () {\n        _this.getimg();\n      };\n      // this.editor.config.uploadVideoHeaders = _this.header;\n      this.editor.config.height = 600;\n      this.editor.config.menus = [\n        \"alertHtml\",\n        \"head\",\n        \"bold\",\n        \"fontSize\",\n        \"fontName\",\n        \"italic\",\n        \"underline\",\n        \"strikeThrough\",\n        \"indent\",\n        \"lineHeight\",\n        \"foreColor\",\n        \"backColor\",\n        \"link\",\n        \"list\",\n        // \"todo\",\n        \"justify\",\n        \"quote\",\n        \"emoticon\",\n        \"image\",\n        \"alertMenuKey\",\n        // \"table\",\n        \"code\",\n        \"splitLine\",\n      ];\n      // 配置全屏功能按钮是否展示\n      //   this.editor.config.showFullScreen = false\n      this.editor.config.uploadImgShowBase64 = true;\n      //   this.editor.config.uploadImgAccept = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp']\n      this.editor.config.zIndex = 0;\n      //   this.editor.config.uploadImgMaxSize = this.uploadSize * 1024 * 1024\n      this.editor.config.compatibleMode = () => {\n        // 返回 true 表示使用兼容模式；返回 false 使用标准模式\n        return true;\n      };\n      this.editor.config.onchange = (newHtml) => {\n        this.newHtml = newHtml;\n        this.$emit(\"editorContent\", newHtml);\n      };\n      this.editor.config.onchangeTimeout = 50; // change后多久更新数据\n\n      this.editor.create();\n    },\n  },\n};\n",null]}