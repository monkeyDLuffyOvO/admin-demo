{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/eslint-loader/index.js??ref--13-0!/home/darkcrossunicorn/文档/admin/src/store/modules/admin/modules/menus.js","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/store/modules/admin/modules/menus.js","mtime":1664694386126},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/darkcrossunicorn/\\u6587\\u6863/admin/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// +----------------------------------------------------------------------\n// | HIGOSHOP [ HIGOSHOP助力中小企业数字化转型 ]\n// +----------------------------------------------------------------------\n// | Copyright (c) 2020~2022 https://www.higoshop.net All rights reserved.\n// +----------------------------------------------------------------------\n// | Licensed HIGOSHOP并不是自由软件，未经许可不能去掉HIGOSHOP相关版权\n// +----------------------------------------------------------------------\n// | Author: HIGOSHOP Team <higoshop@126.com>\n// +----------------------------------------------------------------------\n\n/**\n * 布局菜单配置\n * */\nimport { menusApi } from '@/api/account';\n\nfunction getMenusName() {\n  var storage = window.localStorage,\n      menuList = storage.getItem('menuList'),\n      menuData = [];\n\n  try {\n    menuData = menuList !== undefined ? JSON.parse(menuList) : [];\n  } catch (e) {}\n\n  if (_typeof(menuData) !== 'object' || menuData === null) {\n    menuData = [];\n  }\n\n  return menuData;\n} // 递归处理顶部菜单问题\n\n\nfunction getChilden(data) {\n  if (data.children) {\n    return getChilden(data.children[0]);\n  }\n\n  return data.path;\n}\n\nexport default {\n  namespaced: true,\n  state: {\n    menusName: getMenusName(),\n    //返回首页path\n    indexPath: ''\n  },\n  mutations: {\n    getmenusNav: function getmenusNav(state, menuList) {\n      state.menusName = menuList;\n      var storage = window.localStorage;\n      storage.setItem('menuList', JSON.stringify(menuList));\n    },\n\n    /**\n     * @description 设置返回首页path\n     * @param {Object} state vuex state\n     * @param {Array} menu menu\n     */\n    setIndexPath: function setIndexPath(state, data) {\n      state.indexPath = data;\n    }\n  },\n  getters: {\n    indexPath: function indexPath(state, getters) {\n      var menus = state.menusName;\n\n      if (menus.length && !state.indexPath) {\n        var _getChilden = function _getChilden(data) {\n          if (data.length && data[0].children) {\n            return _getChilden(data[0].children);\n          }\n\n          return data[0].path;\n        };\n\n        var toPath = _getChilden(menus);\n\n        state.indexPath = toPath;\n      } else if (!menus.length && !state.indexPath) {\n        return '/admin/home';\n      }\n\n      return state.indexPath;\n    }\n  },\n  actions: {\n    getMenusNavList: function getMenusNavList(_ref) {\n      var commit = _ref.commit;\n      return new Promise(function (resolve, reject) {\n        menusApi().then(\n        /*#__PURE__*/\n        function () {\n          var _ref2 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(res) {\n            var storage;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    resolve(res);\n                    commit('getmenusNav', res.data.menus);\n                    storage = window.localStorage;\n                    storage.setItem('menuList', JSON.stringify(res.data.menus));\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref2.apply(this, arguments);\n          };\n        }()).catch(function (res) {\n          reject(res);\n        });\n      });\n    }\n  }\n};",null]}