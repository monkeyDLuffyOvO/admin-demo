{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/eslint-loader/index.js??ref--13-0!/home/darkcrossunicorn/文档/admin/src/store/modules/admin/modules/page.js","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/store/modules/admin/modules/page.js","mtime":1664694394832},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/darkcrossunicorn/\\u6587\\u6863/admin/node_modules/@babel/runtime/regenerator\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// +----------------------------------------------------------------------\n// | HIGOSHOP [ HIGOSHOP助力中小企业数字化转型 ]\n// +----------------------------------------------------------------------\n// | Copyright (c) 2020~2022 https://www.higoshop.net All rights reserved.\n// +----------------------------------------------------------------------\n// | Licensed HIGOSHOP并不是自由软件，未经许可不能去掉HIGOSHOP相关版权\n// +----------------------------------------------------------------------\n// | Author: HIGOSHOP Team <higoshop@126.com>\n// +----------------------------------------------------------------------\n\n/**\n * 多标签页\n * */\nimport { get } from 'lodash';\nimport router from '@/router';\nimport Setting from '@/setting';\nimport menuSider from '@/menu/sider';\nimport { getAllSiderMenu, includeArray } from '@/libs/system'; // 判定是否需要缓存\n\nvar isKeepAlive = function isKeepAlive(data) {\n  return get(data, 'meta.cache', false);\n};\n\nexport default {\n  namespaced: true,\n  state: {\n    // 可以在多页 tab 模式下显示的页面\n    pool: [],\n    // 当前显示的多页面列表\n    opened: Setting.page.opened,\n    // 当前页面\n    current: '',\n    // 需要缓存的页面 name\n    keepAlive: []\n  },\n  actions: {\n    /**\n     * @description 从持久化数据载入分页列表\n     */\n    openedLoad: function openedLoad(_ref) {\n      var state = _ref.state,\n          commit = _ref.commit,\n          dispatch = _ref.dispatch,\n          rootState = _ref.rootState;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(resolve) {\n          var value, valid;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return dispatch('admin/db/get', {\n                    dbName: 'sys',\n                    path: 'page.opened',\n                    defaultValue: Setting.page.opened,\n                    user: true\n                  }, {\n                    root: true\n                  });\n\n                case 2:\n                  value = _context.sent;\n                  // 在处理函数中进行数据优化 过滤掉现在已经失效的页签或者已经改变了信息的页签\n                  // 以 fullPath 字段为准\n                  // 如果页面过多的话可能需要优化算法\n                  // valid 有效列表 1, 1, 0, 1 => 有效, 有效, 失效, 有效\n                  valid = []; // 处理数据\n\n                  state.opened = value.map(function (opened) {\n                    // 忽略首页\n                    if (opened.fullPath === '/index') {\n                      valid.push(1);\n                      return opened;\n                    } // 尝试在所有的支持多标签页的页面里找到 name 匹配的页面\n\n\n                    var find = state.pool.find(function (item) {\n                      return item.name === opened.name;\n                    }); // 记录有效或无效信息\n\n                    valid.push(find ? 1 : 0); // 返回合并后的数据 新的覆盖旧的\n                    // 新的数据中一般不会携带 params 和 query, 所以旧的参数会留存\n\n                    return Object.assign({}, opened, find);\n                  }).filter(function (opened, index) {\n                    return valid[index] === 1;\n                  }) // 对 menu 鉴权过滤\n                  .filter(function (opened) {\n                    var allSiderMenu = getAllSiderMenu(menuSider);\n                    var find = allSiderMenu.find(function (item) {\n                      return item.path === opened.fullPath;\n                    });\n                    var state = true;\n\n                    if (find && find.auth) {\n                      var userInfo = rootState.admin.user.info; // @权限\n\n                      var access = userInfo.access; // 如果用户当前的权限，不是该 menu 对应的 权限，则过滤这个 Tab\n\n                      if (access && !includeArray(find.auth, access)) state = false;\n                    }\n\n                    return state;\n                  }); // 根据 opened 数据生成缓存设置\n\n                  commit('keepAliveRefresh'); // end\n\n                  resolve();\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * 将 opened 属性赋值并持久化 在这之前请先确保已经更新了 state.opened\n     */\n    opened2db: function opened2db(_ref3) {\n      var state = _ref3.state,\n          dispatch = _ref3.dispatch;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2(resolve) {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  // 设置数据\n                  dispatch('admin/db/set', {\n                    dbName: 'sys',\n                    path: 'page.opened',\n                    value: state.opened,\n                    user: true\n                  }, {\n                    root: true\n                  }); // end\n\n                  resolve();\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x2) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 更新页面列表上的某一项\n     * @param {Object} param { index, params, query, fullPath } 路由信息\n     */\n    openedUpdate: function openedUpdate(_ref5, _ref6) {\n      var state = _ref5.state,\n          commit = _ref5.commit,\n          dispatch = _ref5.dispatch;\n      var index = _ref6.index,\n          params = _ref6.params,\n          query = _ref6.query,\n          fullPath = _ref6.fullPath,\n          meta = _ref6.meta;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref7 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3(resolve) {\n          var page;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  // 更新页面列表某一项\n                  page = state.opened[index];\n                  page.params = params || page.params;\n                  page.query = query || page.query;\n                  page.fullPath = fullPath || page.fullPath;\n                  page.meta = meta || page.meta;\n                  state.opened.splice(index, 1, page); // 持久化\n\n                  _context3.next = 8;\n                  return dispatch('opened2db');\n\n                case 8:\n                  // end\n                  resolve();\n\n                case 9:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function (_x3) {\n          return _ref7.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 新增一个 tag (打开一个页面)\n     * @param {Object} param new tag info\n     */\n    add: function add(_ref8, _ref9) {\n      var state = _ref8.state,\n          commit = _ref8.commit,\n          dispatch = _ref8.dispatch;\n      var tag = _ref9.tag,\n          params = _ref9.params,\n          query = _ref9.query,\n          fullPath = _ref9.fullPath;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref10 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee4(resolve) {\n          var newTag;\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  // 设置新的 tag 在新打开一个以前没打开过的页面时使用\n                  newTag = tag;\n                  newTag.params = params || newTag.params;\n                  newTag.query = query || newTag.query;\n                  newTag.fullPath = fullPath || newTag.fullPath; // 添加进当前显示的页面数组\n\n                  if (typeof newTag.query.fodder === 'undefined') state.opened.push(newTag); // 如果这个页面需要缓存 将其添加到缓存设置\n\n                  if (isKeepAlive(newTag)) {\n                    commit('keepAlivePush', tag.name);\n                  } // 持久化\n\n\n                  _context4.next = 8;\n                  return dispatch('opened2db');\n\n                case 8:\n                  // end\n                  resolve();\n\n                case 9:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4);\n        }));\n\n        return function (_x4) {\n          return _ref10.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 打开一个新的页面\n     * @param {Object} param 从路由钩子的 to 对象上获取 { name, params, query, fullPath } 路由信息\n     */\n    open: function open(_ref11, _ref12) {\n      var state = _ref11.state,\n          commit = _ref11.commit,\n          dispatch = _ref11.dispatch;\n      var name = _ref12.name,\n          params = _ref12.params,\n          query = _ref12.query,\n          fullPath = _ref12.fullPath;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref13 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee5(resolve) {\n          var opened, pageOpenedIndex, pageOpened, page;\n          return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  // 已经打开的页面\n                  opened = state.opened; // 判断此页面是否已经打开 并且记录位置\n\n                  pageOpenedIndex = 0;\n                  pageOpened = opened.find(function (page, index) {\n                    var same = page.fullPath === fullPath;\n                    pageOpenedIndex = same ? index : pageOpenedIndex;\n                    return same;\n                  });\n\n                  if (!pageOpened) {\n                    _context5.next = 8;\n                    break;\n                  }\n\n                  _context5.next = 6;\n                  return dispatch('openedUpdate', {\n                    index: pageOpenedIndex,\n                    params: params,\n                    query: query,\n                    fullPath: fullPath\n                  });\n\n                case 6:\n                  _context5.next = 12;\n                  break;\n\n                case 8:\n                  // 页面以前没有打开过\n                  page = state.pool.find(function (t) {\n                    return t.name === name;\n                  }); // 如果这里没有找到 page 代表这个路由虽然在框架内 但是不参与标签页显示\n\n                  if (!page) {\n                    _context5.next = 12;\n                    break;\n                  }\n\n                  _context5.next = 12;\n                  return dispatch('add', {\n                    tag: Object.assign({}, page),\n                    params: params,\n                    query: query,\n                    fullPath: fullPath\n                  });\n\n                case 12:\n                  commit('currentSet', fullPath); // end\n\n                  resolve();\n\n                case 14:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5);\n        }));\n\n        return function (_x5) {\n          return _ref13.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 关闭一个 tag (关闭一个页面)\n     * @param {Object} param { tagName: 要关闭的标签名字 }\n     */\n    close: function close(_ref14, _ref15) {\n      var state = _ref14.state,\n          commit = _ref14.commit,\n          dispatch = _ref14.dispatch;\n      var tagName = _ref15.tagName;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref16 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee6(resolve) {\n          var newPage, isCurrent, len, i, index, _newPage, _newPage$name, name, _newPage$params, params, _newPage$query, query, routerObj;\n\n          return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  // 下个新的页面\n                  newPage = state.opened[0];\n                  isCurrent = state.current === tagName; // 如果关闭的页面就是当前显示的页面\n\n                  if (!isCurrent) {\n                    _context6.next = 12;\n                    break;\n                  }\n\n                  // 去找一个新的页面\n                  len = state.opened.length;\n                  i = 0;\n\n                case 5:\n                  if (!(i < len)) {\n                    _context6.next = 12;\n                    break;\n                  }\n\n                  if (!(state.opened[i].fullPath === tagName)) {\n                    _context6.next = 9;\n                    break;\n                  }\n\n                  // 是否只剩最后一个，是则跳首页\n                  if (len > 1) {\n                    // 如果是最后一个，则向前一个跳，否则向下一个跳\n                    if (i === len - 1) {\n                      newPage = state.opened[i - 1];\n                    } else {\n                      newPage = state.opened[i + 1];\n                    }\n                  } else {\n                    newPage = {};\n                  }\n\n                  return _context6.abrupt(\"break\", 12);\n\n                case 9:\n                  i++;\n                  _context6.next = 5;\n                  break;\n\n                case 12:\n                  // 找到这个页面在已经打开的数据里是第几个\n                  index = state.opened.findIndex(function (page) {\n                    return page.fullPath === tagName;\n                  });\n\n                  if (index >= 0) {\n                    // 如果这个页面是缓存的页面 将其在缓存设置中删除\n                    commit('keepAliveRemove', state.opened[index].name); // 更新数据 删除关闭的页面\n\n                    state.opened.splice(index, 1);\n                  } // 持久化\n\n\n                  _context6.next = 16;\n                  return dispatch('opened2db');\n\n                case 16:\n                  // 最后需要判断是否需要跳到首页\n                  if (isCurrent) {\n                    _newPage = newPage, _newPage$name = _newPage.name, name = _newPage$name === void 0 ? 'home_index' : _newPage$name, _newPage$params = _newPage.params, params = _newPage$params === void 0 ? {} : _newPage$params, _newPage$query = _newPage.query, query = _newPage$query === void 0 ? {} : _newPage$query;\n                    routerObj = {\n                      name: name,\n                      params: params,\n                      query: query\n                    };\n                    router.push(routerObj);\n                  } // end\n\n\n                  resolve();\n\n                case 18:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, _callee6);\n        }));\n\n        return function (_x6) {\n          return _ref16.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 关闭当前标签左边的标签\n     * @param {Object} param { pageSelect: 当前选中的tagName }\n     */\n    closeLeft: function closeLeft(_ref17) {\n      var state = _ref17.state,\n          commit = _ref17.commit,\n          dispatch = _ref17.dispatch;\n\n      var _ref18 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          pageSelect = _ref18.pageSelect;\n\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref19 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee7(resolve) {\n          var pageAim, currentIndex;\n          return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  pageAim = pageSelect || state.current;\n                  currentIndex = 0;\n                  state.opened.forEach(function (page, index) {\n                    if (page.fullPath === pageAim) {\n                      currentIndex = index;\n                    }\n                  });\n\n                  if (currentIndex > 0) {\n                    // 删除打开的页面 并在缓存设置中删除\n                    state.opened.splice(1, currentIndex - 1).forEach(function (_ref20) {\n                      var name = _ref20.name;\n                      return commit('keepAliveRemove', name);\n                    });\n                  }\n\n                  state.current = pageAim;\n\n                  if (router.app.$route.fullPath !== pageAim) {\n                    router.push(pageAim);\n                  } // 持久化\n\n\n                  _context7.next = 8;\n                  return dispatch('opened2db');\n\n                case 8:\n                  // end\n                  resolve();\n\n                case 9:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7);\n        }));\n\n        return function (_x7) {\n          return _ref19.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 关闭当前标签右边的标签\n     * @param {Object} param { pageSelect: 当前选中的tagName }\n     */\n    closeRight: function closeRight(_ref21) {\n      var state = _ref21.state,\n          commit = _ref21.commit,\n          dispatch = _ref21.dispatch;\n\n      var _ref22 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          pageSelect = _ref22.pageSelect;\n\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref23 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee8(resolve) {\n          var pageAim, currentIndex;\n          return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  pageAim = pageSelect || state.current;\n                  currentIndex = 0;\n                  state.opened.forEach(function (page, index) {\n                    if (page.fullPath === pageAim) {\n                      currentIndex = index;\n                    }\n                  }); // 删除打开的页面 并在缓存设置中删除\n\n                  state.opened.splice(currentIndex + 1).forEach(function (_ref24) {\n                    var name = _ref24.name;\n                    return commit('keepAliveRemove', name);\n                  }); // 设置当前的页面\n\n                  state.current = pageAim;\n\n                  if (router.app.$route.fullPath !== pageAim) {\n                    router.push(pageAim);\n                  } // 持久化\n\n\n                  _context8.next = 8;\n                  return dispatch('opened2db');\n\n                case 8:\n                  // end\n                  resolve();\n\n                case 9:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, _callee8);\n        }));\n\n        return function (_x8) {\n          return _ref23.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 关闭当前激活之外的 tag\n     * @param {Object} param { pageSelect: 当前选中的tagName }\n     */\n    closeOther: function closeOther(_ref25) {\n      var state = _ref25.state,\n          commit = _ref25.commit,\n          dispatch = _ref25.dispatch;\n\n      var _ref26 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          pageSelect = _ref26.pageSelect;\n\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref27 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee9(resolve) {\n          var pageAim, currentIndex;\n          return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  pageAim = pageSelect || state.current;\n                  currentIndex = 0;\n                  state.opened.forEach(function (page, index) {\n                    if (page.fullPath === pageAim) {\n                      currentIndex = index;\n                    }\n                  }); // 删除打开的页面数据 并更新缓存设置\n\n                  if (currentIndex === 0) {\n                    state.opened.splice(1).forEach(function (_ref28) {\n                      var name = _ref28.name;\n                      return commit('keepAliveRemove', name);\n                    });\n                  } else {\n                    state.opened.splice(currentIndex + 1).forEach(function (_ref29) {\n                      var name = _ref29.name;\n                      return commit('keepAliveRemove', name);\n                    });\n                    state.opened.splice(1, currentIndex - 1).forEach(function (_ref30) {\n                      var name = _ref30.name;\n                      return commit('keepAliveRemove', name);\n                    });\n                  } // 设置新的页面\n\n\n                  state.current = pageAim;\n\n                  if (router.app.$route.fullPath !== pageAim) {\n                    router.push(pageAim);\n                  } // 持久化\n\n\n                  _context9.next = 8;\n                  return dispatch('opened2db');\n\n                case 8:\n                  // end\n                  resolve();\n\n                case 9:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee9);\n        }));\n\n        return function (_x9) {\n          return _ref27.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 关闭所有 tag\n     * @param {Object} state vuex state\n     */\n    closeAll: function closeAll(_ref31) {\n      var state = _ref31.state,\n          commit = _ref31.commit,\n          dispatch = _ref31.dispatch;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref32 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee10(resolve) {\n          return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  // 删除打开的页面 并在缓存设置中删除\n                  state.opened.splice(1).forEach(function (_ref33) {\n                    var name = _ref33.name;\n                    return commit('keepAliveRemove', name);\n                  }); // 持久化\n\n                  _context10.next = 3;\n                  return dispatch('opened2db');\n\n                case 3:\n                  // 关闭所有的标签页后需要判断一次现在是不是在首页\n                  if (router.app.$route.name !== '/admin/home') {\n                    router.push({\n                      name: 'home_index'\n                    });\n                  } // end\n\n\n                  resolve();\n\n                case 5:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee10);\n        }));\n\n        return function (_x10) {\n          return _ref32.apply(this, arguments);\n        };\n      }());\n    }\n  },\n  mutations: {\n    /**\n     * @class keepAlive\n     * @description 从已经打开的页面记录中更新需要缓存的页面记录\n     * @param {Object} state vuex state\n     */\n    keepAliveRefresh: function keepAliveRefresh(state) {\n      state.keepAlive = state.opened.filter(function (item) {\n        return isKeepAlive(item);\n      }).map(function (e) {\n        return e.name;\n      });\n    },\n\n    /**\n     * @description 删除一个页面的缓存设置\n     * @param {Object} state vuex state\n     * @param {String} name name\n     */\n    keepAliveRemove: function keepAliveRemove(state, name) {\n      var list = _toConsumableArray(state.keepAlive);\n\n      var index = list.findIndex(function (item) {\n        return item === name;\n      });\n\n      if (index !== -1) {\n        list.splice(index, 1);\n        state.keepAlive = list;\n      }\n    },\n\n    /**\n     * @description 增加一个页面的缓存设置\n     * @param {Object} state vuex state\n     * @param {String} name name\n     */\n    keepAlivePush: function keepAlivePush(state, name) {\n      var keep = _toConsumableArray(state.keepAlive);\n\n      keep.push(name);\n      state.keepAlive = keep;\n    },\n\n    /**\n     * @description 清空页面缓存设置\n     * @param {Object} state vuex state\n     */\n    keepAliveClean: function keepAliveClean(state) {\n      state.keepAlive = [];\n    },\n\n    /**\n     * @class current\n     * @description 设置当前激活的页面 fullPath\n     * @param {Object} state vuex state\n     * @param {String} fullPath new fullPath\n     */\n    currentSet: function currentSet(state, fullPath) {\n      state.current = fullPath;\n    },\n\n    /**\n     * @class pool\n     * @description 保存 pool (候选池)\n     * @param {Object} state vuex state\n     * @param {Array} routes routes\n     */\n    init: function init(state, routes) {\n      var pool = [];\n\n      var push = function push(routes) {\n        routes.forEach(function (route) {\n          if (route.children) {\n            push(route.children);\n          } else {\n            if (!route.hidden) {\n              var meta = route.meta,\n                  name = route.name,\n                  path = route.path;\n              pool.push({\n                meta: meta,\n                name: name,\n                path: path\n              });\n            }\n          }\n        });\n      };\n\n      push(routes);\n      state.pool = pool;\n    }\n  }\n};",null]}