{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/layouts/basic-layout/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/layouts/basic-layout/index.vue","mtime":1663732015000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport iMenuHead from './menu-head';\nimport iMenuSide from './menu-side';\nimport iHeaderLogo from './header-logo';\nimport iHeaderCollapse from './header-collapse';\nimport iHeaderReload from './header-reload';\nimport iHeaderBreadcrumb from './header-breadcrumb';\nimport iHeaderSearch from './header-search';\nimport iHeaderLog from './header-log';\nimport iHeaderFullscreen from './header-fullscreen';\nimport iHeaderNotice from './header-notice';\nimport iHeaderUser from './header-user';\nimport iHeaderI18n from './header-i18n';\nimport iHeaderSetting from './header-setting';\nimport iTabs from './tabs';\nimport iCopyright from '@/components/copyright';\nimport { mapState, mapGetters, mapMutations } from 'vuex';\nimport Setting from '@/setting';\nimport { requestAnimation } from '@/libs/util';\nexport default {\n  name: 'BasicLayout',\n  components: {\n    iMenuHead: iMenuHead,\n    iMenuSide: iMenuSide,\n    iCopyright: iCopyright,\n    iHeaderLogo: iHeaderLogo,\n    iHeaderCollapse: iHeaderCollapse,\n    iHeaderReload: iHeaderReload,\n    iHeaderBreadcrumb: iHeaderBreadcrumb,\n    iHeaderSearch: iHeaderSearch,\n    iHeaderUser: iHeaderUser,\n    iHeaderI18n: iHeaderI18n,\n    iHeaderLog: iHeaderLog,\n    iHeaderFullscreen: iHeaderFullscreen,\n    iHeaderSetting: iHeaderSetting,\n    iHeaderNotice: iHeaderNotice,\n    iTabs: iTabs\n  },\n  // provide (){\n  //     return {\n  //         reload:this.handleReload\n  //     }\n  // },\n  data: function data() {\n    return {\n      showDrawer: false,\n      ticking: false,\n      headerVisible: true,\n      oldScrollTop: 0,\n      isDelayHideSider: false,\n      // hack，当从隐藏侧边栏的 header 切换到正常 header 时，防止 Logo 抖动\n      loadRouter: true,\n      openImage: true\n    };\n  },\n  computed: _objectSpread({}, mapState('admin/layout', ['siderTheme', 'headerTheme', 'headerStick', 'tabs', 'tabsFix', 'siderFix', 'headerFix', 'headerHide', 'headerMenu', 'isMobile', 'isTablet', 'isDesktop', 'menuCollapse', 'showMobileLogo', 'showSearch', 'showNotice', 'showFullscreen', 'showSiderCollapse', 'showBreadcrumb', 'showLog', 'showI18n', 'showReload', 'enableSetting', 'copyrightShow']), {}, mapState('admin/page', ['keepAlive']), {}, mapGetters('admin/menu', ['hideSider']), {\n    // 如果开启 headerMenu，且当前 header 的 hideSider 为 true，则将顶部按 headerStick 处理\n    // 这时，即使没有开启 headerStick，仍然按开启处理\n    isHeaderStick: function isHeaderStick() {\n      var state = this.headerStick;\n      if (this.hideSider) state = true;\n      return state;\n    },\n    showHeader: function showHeader() {\n      var visible = true;\n      if (this.headerFix && this.headerHide && !this.headerVisible) visible = false;\n      return visible;\n    },\n    headerClasses: function headerClasses() {\n      return [\"i-layout-header-color-\".concat(this.headerTheme), {\n        'i-layout-header-fix': this.headerFix,\n        'i-layout-header-fix-collapse': this.headerFix && this.menuCollapse,\n        'i-layout-header-mobile': this.isMobile,\n        'i-layout-header-stick': this.isHeaderStick && !this.isMobile,\n        'i-layout-header-with-menu': this.headerMenu,\n        'i-layout-header-with-hide-sider': this.hideSider || this.isDelayHideSider\n      }];\n    },\n    headerStyle: function headerStyle() {\n      var menuWidth = this.isHeaderStick ? 0 : this.menuCollapse ? 80 : Setting.menuSideWidth;\n      return this.isMobile || !this.headerFix ? {} : {\n        width: \"calc(100% - \".concat(menuWidth, \"px)\")\n      };\n    },\n    siderClasses: function siderClasses() {\n      return {\n        'i-layout-sider-fix': this.siderFix,\n        'i-layout-sider-dark': this.siderTheme === 'dark'\n      };\n    },\n    contentClasses: function contentClasses() {\n      return {\n        'i-layout-content-fix-with-header': this.headerFix,\n        'i-layout-content-with-tabs': this.tabs,\n        'i-layout-content-with-tabs-fix': this.tabs && this.tabsFix\n      };\n    },\n    insideClasses: function insideClasses() {\n      return {\n        'i-layout-inside-fix-with-sider': this.siderFix,\n        'i-layout-inside-fix-with-sider-collapse': this.siderFix && this.menuCollapse,\n        'i-layout-inside-with-hide-sider': this.hideSider,\n        'i-layout-inside-mobile': this.isMobile\n      };\n    },\n    drawerClasses: function drawerClasses() {\n      var className = 'i-layout-drawer';\n      if (this.siderTheme === 'dark') className += ' i-layout-drawer-dark';\n      return className;\n    },\n    menuSideWidth: function menuSideWidth() {\n      return this.menuCollapse ? 80 : Setting.menuSideWidth;\n    }\n  }),\n  watch: {\n    hideSider: function hideSider() {\n      var _this = this;\n\n      this.isDelayHideSider = true;\n      setTimeout(function () {\n        _this.isDelayHideSider = false;\n      }, 0);\n    },\n    '$route': function $route(to, from) {\n      if (to.path === from.path) {\n        // 相同路由，不同参数，跳转时，重载页面\n        if (Setting.sameRouteForceUpdate) {\n          this.handleReload();\n        }\n      }\n    }\n  },\n  methods: _objectSpread({}, mapMutations('admin/layout', ['updateMenuCollapse']), {}, mapMutations('admin/order', ['getOrderStatus', 'getOrderTime', 'getOrderNum']), {\n    handleToggleDrawer: function handleToggleDrawer(state) {\n      if (typeof state === 'boolean') {\n        this.showDrawer = state;\n      } else {\n        this.showDrawer = !this.showDrawer;\n      }\n    },\n    handleScroll: function handleScroll() {\n      var _this2 = this;\n\n      if (!this.headerHide) return;\n      var scrollTop = document.body.scrollTop + document.documentElement.scrollTop;\n\n      if (!this.ticking) {\n        this.ticking = true;\n        requestAnimation(function () {\n          if (_this2.oldScrollTop > scrollTop) {\n            _this2.headerVisible = true;\n          } else if (scrollTop > 300 && _this2.headerVisible) {\n            _this2.headerVisible = false;\n          } else if (scrollTop < 300 && !_this2.headerVisible) {\n            _this2.headerVisible = true;\n          }\n\n          _this2.oldScrollTop = scrollTop;\n          _this2.ticking = false;\n        });\n      }\n    },\n    handleHeaderWidthChange: function handleHeaderWidthChange() {\n      var $breadcrumb = this.$refs.breadcrumb;\n\n      if ($breadcrumb) {\n        $breadcrumb.handleGetWidth();\n        $breadcrumb.handleCheckWidth();\n      }\n\n      var $menuHead = this.$refs.menuHead;\n\n      if ($menuHead) {\n        $menuHead.handleGetMenuHeight();\n      }\n    },\n    handleReload: function handleReload() {\n      var _this3 = this;\n\n      this.loadRouter = false;\n      this.getOrderStatus('');\n      this.getOrderTime('');\n      this.getOrderNum('');\n      this.$nextTick(function () {\n        _this3.loadRouter = true;\n      });\n    },\n    clear: function clear() {\n      this.openImage = false;\n    }\n  }),\n  mounted: function mounted() {\n    var isopenImage = localStorage.getItem('isopenImage');\n\n    if (isopenImage) {\n      this.openImage = false;\n    }\n\n    document.addEventListener('scroll', this.handleScroll, {\n      passive: true\n    });\n  },\n  activated: function activated() {\n    this.openImage = false;\n    localStorage.setItem('isopenImage', true);\n  },\n  beforeDestroy: function beforeDestroy() {\n    document.removeEventListener('scroll', this.handleScroll);\n  },\n  created: function created() {\n    if (this.isTablet && this.showSiderCollapse) this.updateMenuCollapse(true);\n  }\n};",null]}