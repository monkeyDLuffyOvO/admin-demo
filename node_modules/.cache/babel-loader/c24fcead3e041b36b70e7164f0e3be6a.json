{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/supplier/components/tableList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/supplier/components/tableList.vue","mtime":1655777970000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/darkcrossunicorn/\\u6587\\u6863/admin/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Template from '../../setting/devise/template.vue';\nimport Supplierdetails from './supplierDetails.vue';\nimport orderSend from '@/pages/order/orderList/handle/orderSend.vue';\nimport orderRecord from '@/pages/order/orderList/handle/orderRecord.vue';\nimport orderRemark from '@/pages/order/orderList/handle/orderRemark.vue';\nimport Distribution from '@/pages/order/orderList/components/distribution.vue';\nimport expandRow from \"@/pages/order/orderList/components/tableExpand.vue\"; // import editFrom from '@/components/from/from'\n\nimport userDetails from '@/pages/user/list/handle/userDetails';\nimport { orderInfo, getRefundFrom, deliverRemind } from '@/api/supplier';\nimport { erpConfig } from '@/api/erp';\nexport default {\n  name: '',\n  components: {\n    Template: Template,\n    Supplierdetails: Supplierdetails,\n    orderSend: orderSend,\n    orderRemark: orderRemark,\n    Distribution: Distribution,\n    // editFrom,\n    expandRow: expandRow,\n    userDetails: userDetails,\n    orderRecord: orderRecord\n  },\n  props: {\n    orderList: {\n      type: Array,\n      default: []\n    },\n    columns: {\n      type: Array,\n      default: []\n    },\n    page: {\n      type: Object,\n      default: {}\n    }\n  },\n  data: function data() {\n    return {\n      delfromData: {},\n      FromData: {},\n      rowActive: {},\n      orderDatalist: null,\n      orderId: 0,\n      remind: 1,\n      openErp: false\n    };\n  },\n  computed: {},\n  watch: {},\n  created: function created() {\n    this.getErpConfig();\n  },\n  mounted: function mounted() {},\n  methods: {\n    pageChange: function pageChange(index) {\n      this.page.pageNum = index;\n      this.$emit('getList');\n    },\n    limitChange: function limitChange(limit) {\n      this.page.pageSize = limit;\n      this.$emit('getList');\n    },\n    //erp配置\n    getErpConfig: function getErpConfig() {\n      var _this = this;\n\n      erpConfig().then(function (res) {\n        _this.openErp = res.data.open_erp;\n      }).catch(function (err) {\n        _this.$Message.error(err.msg);\n      });\n    },\n    // 修改成功\n    submitFail: function submitFail(type) {\n      this.status = 0;\n      this.$emit('getList');\n\n      if (this.orderConNum != 1) {\n        this.getData(this.orderId, 1);\n      } else {\n        this.$refs.detailss.getSplitOrder(this.orderConId);\n      }\n\n      if (type) {\n        this.$emit('changeGetTabs');\n      }\n    },\n    showUserInfo: function showUserInfo(row) {\n      this.$refs.userDetails.modals = true;\n      this.$refs.userDetails.activeName = 'info';\n      this.$refs.userDetails.getDetails(row.uid);\n    },\n    // 提醒发货\n    btnClick: function btnClick(row) {\n      var _this2 = this;\n\n      var data = {\n        supplier_id: row.supplier_id,\n        id: row.id\n      };\n      deliverRemind(data).then(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(res) {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _this2.$Message.success(res.msg);\n\n                  _this2.$emit('getList');\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()).catch(function (res) {\n        _this2.$Message.error(res.msg);\n\n        if (res.status == '400') {\n          row.remind = 2;\n        }\n      });\n    },\n    // 打印\n    distributionInfo: function (_distributionInfo) {\n      function distributionInfo(_x2) {\n        return _distributionInfo.apply(this, arguments);\n      }\n\n      distributionInfo.toString = function () {\n        return _distributionInfo.toString();\n      };\n\n      return distributionInfo;\n    }(function (id) {\n      distributionInfo(id).then(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2(res) {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x3) {\n          return _ref2.apply(this, arguments);\n        };\n      }()).catch();\n    }),\n    // 小票打印\n    changeMenu: function changeMenu(row, name, num) {\n      var _this3 = this;\n\n      this.orderId = row.id;\n      this.orderConId = row.pid > 0 ? row.pid : row.id;\n      this.orderConNum = num;\n\n      switch (name) {\n        // 立即支付\n        case '1':\n          this.delfromData = {\n            title: '修改立即支付',\n            url: \"/supplier/order/pay_offline/\".concat(row.id),\n            method: 'post',\n            ids: ''\n          };\n          this.$modalSure(this.delfromData).then(function (res) {\n            _this3.$Message.success(res.msg); // this.$emit(\"changeGetTabs\");\n\n\n            _this3.getData(row.id, 1);\n\n            _this3.$emit('getList');\n          }).catch(function (res) {\n            _this3.$Message.error(res.msg);\n          });\n          break;\n        // 详情\n\n        case '2':\n          this.rowActive = row;\n          this.getData(row.id);\n          break;\n        // 订单记录\n\n        case '3':\n          this.$refs.record.modals = true;\n          this.$refs.record.getList(row.id);\n          break;\n        // 订单备注\n\n        case '4':\n          this.$refs.remarks.formValidate.remark = row.remark;\n          this.$refs.remarks.modals = true;\n          this.$emit('getList');\n          break;\n        // 立即退款\n\n        case '5':\n          this.getOnlyRefundData(row.id, row.refund_type);\n          break;\n        // 同意退货\n\n        case '55':\n          this.getRefundData(row.id, row.refund_type);\n          break;\n        // 打印\n\n        case '7':\n          this.distributionInfo(row.id);\n          break;\n        // 配货单\n\n        case '9':\n          this.getRefundData(row.id, row.refund_type);\n          break;\n        // 已收货\n\n        case '8':\n          this.delfromData = {\n            title: '修改确认收货',\n            url: \"/supplier/order/take/\".concat(row.id),\n            method: 'put',\n            ids: ''\n          };\n          this.$modalSure(this.delfromData).then(function (res) {\n            _this3.$Message.success(res.msg);\n\n            _this3.$emit('changeGetTabs');\n\n            _this3.$emit('getList');\n\n            if (num) {\n              _this3.$refs.detailss.getSplitOrder(row.pid);\n            } else {\n              _this3.getData(row.id, 1);\n            }\n          }).catch(function (res) {\n            _this3.$Message.error(res.msg);\n          }); // this.modalTitleSs = '修改确认收货';\n\n          break;\n\n        case \"12\":\n          var pathInfo = this.$router.resolve({\n            path: '/admin/supplier/order/distribution',\n            query: {\n              id: row.id,\n              status: 1\n            }\n          });\n          window.open(pathInfo.href, '_blank');\n          break;\n        // 小票打印\n\n        case '10':\n          this.delfromData = {\n            title: '立即打印订单',\n            info: '您确认打印此订单吗?',\n            url: \"/supplier/order/print/\".concat(row.id),\n            method: 'get',\n            ids: ''\n          };\n          this.$modalSure(this.delfromData).then(function (res) {\n            _this3.$Message.success(res.msg);\n\n            _this3.$emit('getList');\n          }).catch(function (res) {\n            _this3.$Message.error(res.msg);\n          });\n          break;\n      }\n    },\n    // 仅退款\n    getOnlyRefundData: function getOnlyRefundData(id, refund_type) {\n      var _this4 = this;\n\n      this.$modalForm(getRefundFrom(id)).then(function () {\n        _this4.$emit('getList');\n\n        _this4.$emit('changeGetTabs');\n\n        _this4.$refs.detailss.modals = false;\n      });\n    },\n    // 退货退款\n    getRefundData: function getRefundData(id, refund_type) {\n      var _this5 = this;\n\n      this.delfromData = {\n        title: '是否立即退货退款',\n        url: \"/supplier/refund/agree/\".concat(id),\n        method: 'get'\n      };\n      this.$modalSure(this.delfromData).then(function (res) {\n        _this5.$Message.success(res.msg);\n\n        _this5.$emit('getList');\n\n        _this5.$emit('changeGetTabs');\n      }).catch(function (res) {\n        _this5.$Message.error(res.msg);\n      });\n    },\n    // 获取详情表单数据\n    getData: function getData(id, type) {\n      var _this6 = this;\n\n      orderInfo(id).then(\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3(res) {\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!type) {\n                    _this6.$refs.detailss.modals = true;\n                  }\n\n                  _this6.$refs.detailss.activeName = 'detail';\n                  _this6.orderDatalist = res.data;\n\n                  if (_this6.orderDatalist.orderInfo.refund_reason_wap_img) {\n                    try {\n                      _this6.orderDatalist.orderInfo.refund_reason_wap_img = JSON.parse(_this6.orderDatalist.orderInfo.refund_reason_wap_img);\n                    } catch (e) {\n                      _this6.orderDatalist.orderInfo.refund_reason_wap_img = [];\n                    }\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function (_x4) {\n          return _ref3.apply(this, arguments);\n        };\n      }()).catch(function (res) {\n        _this6.$Message.error(res.msg);\n      });\n    }\n  }\n};",null]}