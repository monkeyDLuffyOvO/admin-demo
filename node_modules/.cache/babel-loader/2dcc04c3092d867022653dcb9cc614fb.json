{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/components/wangEditor/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/components/wangEditor/index.vue","mtime":1652232731000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport monaco from \"./monaco\";\nimport E from \"wangeditor\";\nimport AlertMenu from \"./editor\";\nimport HtmlMenu from \"./html\";\nimport uploadPictures from \"@/components/uploadPictures\";\nimport uploadVideo from \"@/components/uploadVideos\";\nimport util from '../../utils/bus';\nexport default {\n  name: \"Index\",\n  components: {\n    uploadPictures: uploadPictures,\n    uploadVideo: uploadVideo,\n    monaco: monaco\n  },\n  props: {\n    content: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data: function data() {\n    return {\n      monacoBox: false,\n      value: \"\",\n      modalPic: false,\n      isChoice: \"多选\",\n      picTit: \"danFrom\",\n      img: \"\",\n      modalVideo: false,\n      editor: null,\n      uploadSize: 2,\n      video: \"\",\n      newHtml: '' // header: {\n      //   \"Authori-zation\": \"Bearer \" + getCookies(\"token\"),\n      // },\n\n    };\n  },\n  computed: {\n    initEditor: function initEditor() {\n      return this.content && this.editor;\n    }\n  },\n  watch: {\n    // content: function (val) {\n    //   if (val !== \"\") {\n    //     this.editor.txt.html(val);\n    //   } else {\n    //     this.editor.txt.clear();\n    //   }\n    // },\n    initEditor: function initEditor(val) {\n      if (val) {\n        this.editor.txt.html(this.content);\n      }\n    }\n  },\n  created: function created() {// window.getvideoint = this.getvideoint;\n    // window.getHtmlint = this.getHtmlint;\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.createEditor();\n    util.$on('Video', function (Video) {\n      _this2.getvideoint();\n    });\n    util.$on('Html', function (Html) {\n      _this2.getHtmlint();\n    });\n  },\n  methods: {\n    changeValue: function changeValue(value) {\n      this.newHtml = value;\n      this.$emit(\"editorContent\", value);\n      this.$emit(\"input\", value);\n    },\n    // 获取多张图信息\n    getPic: function getPic(pc) {\n      var _this = this;\n\n      _this.img = pc.att_dir;\n      _this.modalPic = false;\n      this.editor.cmd.do(\"insertHTML\", \"<img src=\\\"\".concat(_this.img, \"\\\" style=\\\"max-width:100%;\\\"/>\"));\n    },\n    getimg: function getimg() {\n      this.modalPic = true;\n      this.isChoice = \"多选\";\n    },\n    getvideoint: function getvideoint() {\n      this.modalVideo = true;\n    },\n    getHtmlint: function getHtmlint() {\n      this.monacoBox = !this.monacoBox;\n      this.value = this.newHtml;\n\n      if (!this.monacoBox) {\n        this.editor.txt.html(this.newHtml);\n      }\n    },\n    getPicD: function getPicD(data) {\n      var _this3 = this;\n\n      var _this = this;\n\n      _this.modalPic = false;\n      data.map(function (d) {\n        _this3.editor.cmd.do(\"insertHTML\", \"<img src=\\\"\".concat(d.att_dir, \"\\\" style=\\\"max-width:100%;\\\"/>\"));\n      });\n    },\n    getvideo: function getvideo(data) {\n      var _this = this;\n\n      _this.modalVideo = false;\n      this.video = data;\n      this.editor.cmd.do(\"insertHTML\", \"<video src=\\\"\".concat(_this.video, \"\\\" controls style=\\\"max-width:100%;\\\"/>\"));\n    },\n    createEditor: function createEditor() {\n      var _this4 = this;\n\n      var _this = this;\n\n      var menuKey = \"alertMenuKey\";\n      var html = \"alertHtml\";\n      this.editor = new E(this.$refs[\"wang-editor\"]);\n      this.editor.menus.extend(menuKey, AlertMenu);\n      this.editor.menus.extend(html, HtmlMenu);\n      this.editor.config.menus = this.editor.config.menus.concat(html);\n      this.editor.config.menus = this.editor.config.menus.concat(menuKey);\n\n      this.editor.config.uploadImgFromMedia = function () {\n        _this.getimg();\n      }; // this.editor.config.uploadVideoHeaders = _this.header;\n\n\n      this.editor.config.height = 600;\n      this.editor.config.menus = [\"alertHtml\", \"head\", \"bold\", \"fontSize\", \"fontName\", \"italic\", \"underline\", \"strikeThrough\", \"indent\", \"lineHeight\", \"foreColor\", \"backColor\", \"link\", \"list\", // \"todo\",\n      \"justify\", \"quote\", \"emoticon\", \"image\", \"alertMenuKey\", // \"table\",\n      \"code\", \"splitLine\"]; // 配置全屏功能按钮是否展示\n      //   this.editor.config.showFullScreen = false\n\n      this.editor.config.uploadImgShowBase64 = true; //   this.editor.config.uploadImgAccept = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp']\n\n      this.editor.config.zIndex = 0; //   this.editor.config.uploadImgMaxSize = this.uploadSize * 1024 * 1024\n\n      this.editor.config.compatibleMode = function () {\n        // 返回 true 表示使用兼容模式；返回 false 使用标准模式\n        return true;\n      };\n\n      this.editor.config.onchange = function (newHtml) {\n        _this4.newHtml = newHtml;\n\n        _this4.$emit(\"editorContent\", newHtml);\n      };\n\n      this.editor.config.onchangeTimeout = 50; // change后多久更新数据\n\n      this.editor.create();\n    }\n  }\n};",null]}