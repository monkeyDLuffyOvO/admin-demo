{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/eslint-loader/index.js??ref--13-0!/home/darkcrossunicorn/文档/admin/src/store/modules/admin/modules/i18n.js","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/store/modules/admin/modules/i18n.js","mtime":1664694364281},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["// +----------------------------------------------------------------------\n// | HIGOSHOP [ HIGOSHOP助力中小企业数字化转型 ]\n// +----------------------------------------------------------------------\n// | Copyright (c) 2020~2022 https://www.higoshop.net All rights reserved.\n// +----------------------------------------------------------------------\n// | Licensed HIGOSHOP并不是自由软件，未经许可不能去掉HIGOSHOP相关版权\n// +----------------------------------------------------------------------\n// | Author: HIGOSHOP Team <higoshop@126.com>\n// +----------------------------------------------------------------------\n\n/**\n * 多语言\n * */\nimport Languages from '@/i18n/locale';\nimport Setting from '@/setting';\nimport util from '@/libs/util';\nimport { pathInit } from '@/store/modules/admin/modules/db';\nvar savedLocaleKey = 'i18n-locale';\nexport default {\n  namespaced: true,\n  state: {\n    locale: ''\n  },\n  actions: {\n    /**\n     * @description 获取当前语言\n     * */\n    getLocale: function getLocale(_ref) {\n      var state = _ref.state;\n      var locale;\n      var db = util.db.get(pathInit({\n        dbName: 'database',\n        path: '',\n        user: true,\n        defaultValue: {}\n      }));\n      var savedLocale = db.get(savedLocaleKey).value(); // 先判断本地存储是否已有语言选择\n\n      if (savedLocale) {\n        locale = savedLocale;\n      } else {\n        // 判断是否开启自动识别语言\n        if (Setting.i18n.auto) {\n          // 如果自动识别的语言，本地没有该语言包，则设置为默认语言\n          var navLang = navigator.language;\n\n          if (Languages[navLang]) {\n            locale = navLang;\n          } else {\n            locale = Setting.i18n.default;\n          }\n        } else {\n          locale = Setting.i18n.default;\n        } // 将初次的语言保存在本地\n\n\n        db.set(savedLocaleKey, locale).write();\n      }\n\n      state.locale = locale;\n    },\n\n    /**\n     * @description 设置当前语言\n     * */\n    setLocale: function setLocale(_ref2, _ref3) {\n      var state = _ref2.state;\n      var _ref3$locale = _ref3.locale,\n          locale = _ref3$locale === void 0 ? Setting.i18n.default : _ref3$locale,\n          vm = _ref3.vm;\n      var db = util.db.get(pathInit({\n        dbName: 'database',\n        path: '',\n        user: true,\n        defaultValue: {}\n      })); // 将语言保存在本地\n\n      db.set(savedLocaleKey, locale).write(); // 设置当前语言\n\n      state.locale = locale; // 设置 vue-i18n 的语言\n\n      vm.$i18n.locale = locale; // 更新网页标题\n\n      util.title({\n        title: vm.$route.meta.title\n      });\n    }\n  }\n};",null]}