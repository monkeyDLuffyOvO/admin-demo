{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/kefu/mobile/orderList/orderDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/kefu/mobile/orderList/orderDetail.vue","mtime":1663291930000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport PriceChange from \"../../components/PriceChange\";\nimport ClipboardJS from \"clipboard\";\nimport { orderInfo, refundInfo } from '@/api/kefu';\nimport { erpConfig } from \"@/api/erp\";\nimport { required, num } from \"@/utils/validate\";\nimport { validatorDefaultCatch } from \"@/libs/dialog\";\nexport default {\n  name: \"AdminOrder\",\n  components: {\n    PriceChange: PriceChange\n  },\n  props: {},\n  data: function data() {\n    return {\n      openErp: false,\n      giveData: {\n        give_integral: 0,\n        give_coupon: []\n      },\n      giveCartInfo: [],\n      order: false,\n      change: false,\n      orderId: '',\n      orderInfo: {},\n      status: 0,\n      title: \"\",\n      payType: \"\",\n      types: \"\",\n      isReturen: 0\n    };\n  },\n  watch: {\n    \"$route\": function $route(newVal) {\n      var that = this;\n\n      if (newVal != undefined) {\n        that.orderId = newVal;\n        that.getIndex();\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.getErpConfig(); // this.orderId = this.$route.params.id;\n\n    this.getIndex();\n    this.$nextTick(function () {\n      var _this = this;\n\n      var copybtn = document.getElementsByClassName(\"copy-data\");\n      var clipboard = new ClipboardJS(copybtn);\n      clipboard.on(\"success\", function () {\n        _this.$dialog.success(\"复制成功\");\n      });\n    });\n  },\n  methods: {\n    getErpConfig: function getErpConfig() {\n      var _this2 = this;\n\n      erpConfig().then(function (res) {\n        _this2.openErp = res.data.open_erp;\n      }).catch(function (err) {\n        _this2.$Message.error(err.msg);\n      });\n    },\n    more: function more() {\n      this.order = !this.order;\n    },\n    modify: function modify(status) {\n      if (status != 1 && openErp) return;\n      this.change = true;\n      this.status = status;\n    },\n    changeclose: function changeclose(msg) {\n      this.change = msg;\n      this.getIndex();\n    },\n    closeChange: function closeChange(msg) {\n      this.change = msg;\n    },\n    getIndex: function getIndex() {\n      var _this3 = this;\n\n      var that = this;\n      var isReturen = this.$route.params.goname || 0;\n      var obj = '';\n      this.isReturen = isReturen;\n\n      if (isReturen == 1) {\n        obj = refundInfo(this.$route.params.id);\n      } else {\n        obj = orderInfo(this.$route.params.id);\n      }\n\n      obj.then(function (res) {\n        that.types = res.data.orderInfo._status._type;\n        that.title = res.data.orderInfo._status._title;\n        that.giveData.give_coupon = res.data.orderInfo.give_coupon;\n        that.giveData.give_integral = res.data.orderInfo.give_integral;\n        var cartObj = [],\n            giftObj = [];\n        res.data.orderInfo.cartInfo.forEach(function (item, index) {\n          if (item.is_gift == 1) {\n            giftObj.push(item);\n          } else {\n            cartObj.push(item);\n          }\n        });\n        res.data.orderInfo.cartInfo = cartObj;\n        that.$set(that, 'giveCartInfo', giftObj);\n        that.orderInfo = res.data.orderInfo;\n\n        _this3.$nextTick(function () {\n          var _this4 = this;\n\n          var copybtn = document.getElementsByClassName(\"copy-data\");\n          var clipboard = new ClipboardJS(copybtn);\n          clipboard.on(\"success\", function () {\n            _this4.$dialog.success(\"复制成功\");\n          });\n        });\n      }, function (err) {\n        that.$dialog.error(err.msg);\n      });\n    },\n    offlinePay: function offlinePay() {\n      var _this5 = this;\n\n      if (openErp) return;\n      setOfflinePay({\n        orderId: this.orderInfo.orderId\n      }).then(function (res) {\n        _this5.$dialog.success(res.msg);\n\n        _this5.getIndex();\n      }, function (err) {\n        _this5.$dialog.error(err.msg);\n      });\n    }\n  }\n};",null]}