{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/setting/devise/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/setting/devise/list.vue","mtime":1662022393000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/darkcrossunicorn/\\u6587\\u6863/admin/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Setting from '@/setting';\nimport ClipboardJS from 'clipboard';\nimport { diyList, diyDel, setStatus as _setStatus, recovery as _recovery, getRoutineCode } from '@/api/diy';\nimport { mapState } from 'vuex';\nimport QRCode from 'qrcodejs2';\nimport goodClass from './goodClass';\nimport newGoods from './newGoods';\nimport users from './users';\nexport default {\n  name: 'devise_list',\n  computed: _objectSpread({}, mapState('admin/layout', ['menuCollapse', 'isMobile'])),\n  components: {\n    goodClass: goodClass,\n    newGoods: newGoods,\n    users: users\n  },\n  data: function data() {\n    return {\n      grid: {\n        sm: 10,\n        md: 12,\n        lg: 19\n      },\n      loading: false,\n      theme3: 'light',\n      menuList: [{\n        name: '商城首页',\n        id: 1\n      }, {\n        name: '商品分类',\n        id: 2\n      }, {\n        name: '商品详情',\n        id: 3\n      }, {\n        name: '个人中心',\n        id: 4\n      }],\n      columns1: [{\n        title: '页面ID',\n        key: 'id',\n        width: 80\n      }, {\n        title: '模板名称',\n        key: 'name',\n        minWidth: 100\n      }, {\n        title: '添加时间',\n        key: 'add_time',\n        minWidth: 100\n      }, {\n        title: '更新时间',\n        key: 'update_time',\n        minWidth: 100\n      }, {\n        title: '操作',\n        slot: 'action',\n        // fixed: \"right\",\n        width: 200\n      }],\n      list: [],\n      imgUrl: '',\n      modal: false,\n      BaseURL: Setting.apiBaseURL.replace(/adminapi/, ''),\n      cardShow: 0,\n      loadingExist: false,\n      isDiy: 1,\n      qrcodeImg: '',\n      diyFrom: {\n        type: 1,\n        page: 1,\n        limit: 10\n      },\n      total: 0\n    };\n  },\n  created: function created() {\n    this.getList(); // var storage = window.localStorage;\n    // storage.setItem('imgUrl',imgUrl)\n  },\n  mounted: function mounted() {},\n  methods: {\n    getChildData: function getChildData(e) {\n      this.loadingExist = e;\n    },\n    submit: function submit() {\n      switch (this.cardShow) {\n        case 1:\n          this.$refs.category.onSubmit();\n          break;\n\n        case 2:\n          this.$refs.newGoods.onSubmit();\n          break;\n\n        case 3:\n          this.$refs.users.onSubmit();\n          break;\n      } // if (this.cardShow == 1) {\n      // this.$refs.category.onSubmit()\n      // } else {\n      //   this.$refs.users.onSubmit()\n      // }\n\n    },\n    reast: function reast() {\n      if (this.cardShow == 1) {\n        this.$refs.category.onSubmit(1);\n      }\n    },\n    bindMenuItem: function bindMenuItem(index) {\n      this.cardShow = index;\n    },\n    onCopy: function onCopy() {\n      this.$Message.success('复制预览链接成功');\n    },\n    onError: function onError() {\n      this.$Message.error('复制预览链接失败');\n    },\n    //生成二维码\n    creatQrCode: function creatQrCode(id, status) {\n      this.$refs.qrCodeUrl.innerHTML = '';\n      var url = '';\n\n      if (status) {\n        url = \"\".concat(this.BaseURL, \"pages/index/index\");\n      } else {\n        url = \"\".concat(this.BaseURL, \"pages/annex/special/index?id=\").concat(id);\n      }\n\n      var qrcode = new QRCode(this.$refs.qrCodeUrl, {\n        text: url,\n        // 需要转换为二维码的内容\n        width: 160,\n        height: 160,\n        colorDark: '#000000',\n        colorLight: '#ffffff',\n        correctLevel: QRCode.CorrectLevel.H\n      });\n    },\n    //小程序二维码\n    routineCode: function routineCode(id) {\n      var _this = this;\n\n      getRoutineCode(id).then(function (res) {\n        _this.qrcodeImg = res.data.image;\n      }).catch(function (err) {\n        _this.$Message.error(err);\n      });\n    },\n    preview: function preview(row) {\n      this.modal = true;\n      this.creatQrCode(row.id, row.status);\n      this.routineCode(row.id);\n    },\n    // 获取列表\n    getList: function getList() {\n      var _this2 = this;\n\n      var storage = window.localStorage;\n      this.imgUrl = storage.getItem('imgUrl');\n      var that = this;\n      this.loading = true;\n      diyList(this.diyFrom).then(function (res) {\n        _this2.loading = false;\n        var data = res.data;\n        _this2.list = data.list;\n        _this2.total = data.count;\n        data.list.forEach(function (e) {\n          if (e.status == 1) {\n            that.isDiy = e.is_diy;\n            var imgUrl = \"\".concat(that.BaseURL, \"pages/annex/special/index?id=\").concat(e.id);\n            storage.setItem('imgUrl', imgUrl);\n            that.imgUrl = imgUrl; // let imgUrl = JSON.parse(storage.getItem('menuList'));\n            // that.imgUrl = `http://192.168.1.12:8080/pages/annex/special/index?id=${e.id}`;\n          }\n        });\n      });\n    },\n    pageChange: function pageChange(status) {\n      this.diyFrom.page = status;\n      this.getList();\n    },\n    // 编辑\n    edit: function edit(row) {\n      if (row.is_diy) {\n        // this.$store.commit('userInfo/setPageName', row.template_name || 'moren');\n        this.$router.push({\n          path: '/admin/pages/diy',\n          query: {\n            id: row.id,\n            name: row.template_name || 'moren'\n          }\n        });\n      } else {\n        var storage = window.localStorage;\n        storage.setItem('pageName', row.template_name);\n        this.$store.dispatch('admin/user/getPageName');\n        this.$router.push({\n          path: '/admin/setting/pages/template',\n          query: {\n            id: row.id,\n            name: row.template_name\n          }\n        });\n      }\n    },\n    // 添加\n    add: function add() {\n      this.$router.push({\n        path: '/admin/pages/diy',\n        query: {\n          id: 0,\n          name: '首页',\n          type: 1\n        }\n      });\n    },\n    // 删除\n    del: function del(row) {\n      var _this3 = this;\n\n      var delfromData = {\n        title: '删除',\n        num: 2000,\n        url: 'diy/del/' + row.id,\n        method: 'DELETE',\n        data: {\n          type: 1\n        }\n      };\n      this.$modalSure(delfromData).then(function (res) {\n        _this3.getList();\n      }).catch(function (res) {\n        _this3.$Message.error(res.msg);\n      });\n    },\n    // 使用模板\n    setStatus: function () {\n      var _setStatus2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(row) {\n        var _this4 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.$Modal.confirm({\n                  title: '提示',\n                  content: '<p>是否把该模板设为首页</p>',\n                  onOk: function onOk() {\n                    _setStatus(row.id, {\n                      type: 1\n                    }).then(function (res) {\n                      var that = _this4;\n\n                      if (res.data.status) {\n                        _this4.$Message.success(res.data.msg);\n\n                        _this4.$Modal.remove();\n\n                        _this4.getList();\n                      } else {\n                        setTimeout(function (e) {\n                          that.$Modal.confirm({\n                            title: '提示',\n                            content: '<p>尚未安装模板，请安装后再试！</p>',\n                            loading: false //okText: \"点击购买\",\n                            // onOk: () => {\n                            //   window.open(\"http://s.crmeb.com/goods_cate\", `_blank`);\n                            // },\n\n                          });\n                        }, 500);\n                      }\n                    }).catch(function (res) {\n                      _this4.$Modal.remove();\n\n                      _this4.$Message.error(res.msg);\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setStatus(_x) {\n        return _setStatus2.apply(this, arguments);\n      }\n\n      return setStatus;\n    }(),\n    recovery: function recovery(row) {\n      var _this5 = this;\n\n      _recovery(row.id).then(function (res) {\n        _this5.$Message.success(res.msg);\n\n        _this5.getList();\n      });\n    }\n  }\n};",null]}