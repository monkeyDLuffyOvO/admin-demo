{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/marketing/storeBargain/create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/marketing/storeBargain/create.vue","mtime":1662341777000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/darkcrossunicorn/\\u6587\\u6863/admin/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport goodsList from '@/components/goodsList/index';\nimport uploadPictures from '@/components/uploadPictures';\nimport freightTemplate from \"@/components/freightTemplate\";\nimport { bargainInfoApi, bargainCreatApi, productAttrsApi } from '@/api/marketing';\nimport { productGetTemplateApi, productAllUnit, productUnitCreate } from '@/api/product';\nimport WangEditor from \"@/components/wangEditor/index.vue\";\nexport default {\n  name: 'storeBargainCreate',\n  components: {\n    goodsList: goodsList,\n    uploadPictures: uploadPictures,\n    WangEditor: WangEditor,\n    freightTemplate: freightTemplate\n  },\n  data: function data() {\n    return {\n      template: false,\n      submitOpen: false,\n      spinShow: false,\n      myConfig: {\n        autoHeightEnabled: false,\n        // 编辑器不自动被内容撑高\n        initialFrameHeight: 500,\n        // 初始容器高度\n        initialFrameWidth: '100%',\n        // 初始容器宽度\n        UEDITOR_HOME_URL: '/admin/UEditor/',\n        serverUrl: ''\n      },\n      isChoice: '',\n      current: 0,\n      modalPic: false,\n      grid: {\n        xl: 12,\n        lg: 20,\n        md: 24,\n        sm: 24,\n        xs: 24\n      },\n      grid2: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24\n      },\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8\n      },\n      modals: false,\n      modal_loading: false,\n      images: [],\n      templateList: [],\n      columns: [],\n      specsData: [],\n      unitNameList: [],\n      formValidate: {\n        is_support_refund: 0,\n        product_type: 0,\n        freight: 1,\n        //运费设置\n        delivery_type: [],\n        images: [],\n        info: '',\n        title: '',\n        store_name: '',\n        image: '',\n        unit_name: '',\n        price: 0,\n        min_price: 0,\n        bargain_max_price: 10,\n        bargain_min_price: 0.01,\n        cost: 0,\n        bargain_num: 1,\n        people_num: 2,\n        stock: 1,\n        sales: 0,\n        sort: 0,\n        num: 1,\n        give_integral: 0,\n        postage: 0,\n        is_postage: 0,\n        is_hot: 0,\n        status: 0,\n        section_time: [],\n        description: '',\n        rule: '',\n        id: 0,\n        product_id: 0,\n        temp_id: '',\n        attrs: [],\n        items: []\n      },\n      rule: \"\",\n      description: '',\n      ruleValidate: {\n        image: [{\n          required: true,\n          message: '请选择主图',\n          trigger: 'change'\n        }],\n        images: [{\n          required: true,\n          type: 'array',\n          message: '请选择主图',\n          trigger: 'change'\n        }, {\n          type: 'array',\n          min: 1,\n          message: 'Choose two hobbies at best',\n          trigger: 'change'\n        }],\n        title: [{\n          required: true,\n          message: '请输入砍价活动名称',\n          trigger: 'blur'\n        }],\n        info: [{\n          required: true,\n          message: '请输入砍价活动简介',\n          trigger: 'blur'\n        }],\n        store_name: [{\n          required: true,\n          message: '请输入砍价商品名称',\n          trigger: 'blur'\n        }],\n        section_time: [{\n          required: true,\n          type: 'array',\n          message: '请选择活动时间',\n          trigger: 'change'\n        }],\n        unit_name: [{\n          required: true,\n          message: \"请输入单位\",\n          trigger: \"change\"\n        }],\n        price: [{\n          required: true,\n          type: 'number',\n          message: '请输入原价',\n          trigger: 'blur'\n        }],\n        min_price: [{\n          required: true,\n          type: 'number',\n          message: '请输入最低购买价',\n          trigger: 'blur'\n        }],\n        // bargain_max_price: [\n        //     { required: true, type: 'number', message: '请输单次砍价最大金额', trigger: 'blur' }\n        // ],\n        // bargain_min_price: [\n        //     { required: true, type: 'number', message: '单次砍价最小金额', trigger: 'blur' }\n        // ],\n        cost: [{\n          required: true,\n          type: 'number',\n          message: '请输入成本价',\n          trigger: 'blur'\n        }],\n        bargain_num: [{\n          required: true,\n          type: 'number',\n          message: '请输入帮砍次数',\n          trigger: 'blur'\n        }],\n        people_num: [{\n          required: true,\n          type: 'number',\n          message: '请输入砍价人数',\n          trigger: 'blur'\n        }],\n        stock: [{\n          required: true,\n          type: 'number',\n          message: '请输入库存',\n          trigger: 'blur'\n        }],\n        num: [{\n          required: true,\n          type: 'number',\n          message: '请输入单次允许购买数量',\n          trigger: 'blur'\n        }]\n      },\n      currentid: '',\n      picTit: '',\n      tableIndex: 0,\n      copy: 0\n    };\n  },\n  computed: _objectSpread({}, mapState('admin/layout', ['isMobile', 'menuCollapse']), {\n    labelWidth: function labelWidth() {\n      return this.isMobile ? undefined : 135;\n    },\n    labelPosition: function labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    }\n  }),\n  mounted: function mounted() {\n    if (this.$route.params.id !== '0' && this.$route.params.id) {\n      this.copy = this.$route.params.copy;\n      this.current = 1;\n      this.getInfo();\n    }\n\n    this.productGetTemplate();\n    this.getAllUnit();\n  },\n  methods: {\n    changeTemplate: function changeTemplate(msg) {\n      this.template = msg;\n    },\n    // 添加运费模板\n    addTemp: function addTemp() {\n      this.$refs.templates.isTemplate = true;\n    },\n    addUnit: function addUnit() {\n      var _this = this;\n\n      this.$modalForm(productUnitCreate()).then(function () {\n        return _this.getAllUnit();\n      });\n    },\n    getAllUnit: function getAllUnit() {\n      var _this2 = this;\n\n      productAllUnit().then(function (res) {\n        _this2.unitNameList = res.data;\n      }).catch(function (err) {\n        _this2.$Message.error(err.msg);\n      });\n    },\n    getEditorContent: function getEditorContent(data) {\n      this.formValidate.description = data;\n    },\n    getEditorContent2: function getEditorContent2(data) {\n      this.formValidate.rule = data;\n    },\n    // 砍价规格；\n    productAttrs: function productAttrs(row) {\n      var _this3 = this;\n\n      var that = this;\n      productAttrsApi(row.id, 2).then(function (res) {\n        var data = res.data.info;\n        var radio = {\n          title: '选择',\n          key: 'chose',\n          width: 60,\n          align: 'center',\n          render: function render(h, params) {\n            var uid = params.index;\n            var flag = false;\n\n            if (_this3.currentid === uid) {\n              flag = true;\n            } else {\n              flag = false;\n            }\n\n            var self = _this3;\n            return h('div', [h('Radio', {\n              props: {\n                value: flag\n              },\n              on: {\n                'on-change': function onChange() {\n                  self.currentid = uid;\n                  var attrs = [];\n                  attrs.push(params.row);\n                  self.formValidate.attrs = attrs;\n                }\n              }\n            })]);\n          }\n        };\n        that.columns = data.header;\n        that.columns.unshift(radio);\n        that.specsData = data.attrs;\n        that.formValidate.items = data.items;\n      }).catch(function (res) {\n        that.$Message.error(res.msg);\n      });\n    },\n    // 获取运费模板；\n    productGetTemplate: function productGetTemplate() {\n      var _this4 = this;\n\n      productGetTemplateApi().then(function (res) {\n        _this4.templateList = res.data;\n      });\n    },\n    // 商品id\n    getProductId: function getProductId(row) {\n      var _this5 = this;\n\n      this.modal_loading = false;\n      this.modals = false;\n      setTimeout(function () {\n        _this5.formValidate = {\n          is_support_refund: row.is_support_refund,\n          product_type: row.product_type,\n          images: row.slider_image,\n          info: row.store_info,\n          title: row.store_name,\n          store_name: row.store_name,\n          image: row.image,\n          unit_name: row.unit_name,\n          price: 0,\n          // 不取商品中的原价\n          min_price: 0,\n          bargain_max_price: 10,\n          bargain_min_price: 0.01,\n          cost: row.cost,\n          bargain_num: 1,\n          people_num: 2,\n          stock: row.stock,\n          sales: row.sales,\n          sort: row.sort,\n          num: 1,\n          give_integral: row.give_integral,\n          postage: row.postage,\n          is_postage: row.is_postage,\n          is_hot: row.is_hot,\n          status: 0,\n          section_time: [],\n          description: row.description,\n          // 不取商品中的\n          rule: '',\n          id: 0,\n          product_id: row.id,\n          temp_id: row.temp_id,\n          freight: 1,\n          //运费设置\n          delivery_type: []\n        };\n        _this5.description = row.description;\n        _this5.rule = row.rule;\n\n        _this5.productAttrs(row);\n      }, 500);\n    },\n    cancel: function cancel() {\n      this.modals = false;\n    },\n    // 移动\n    handleDragStart: function handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd: function handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    // 首先把div变成可以放置的元素，即重写dragenter/dragover\n    handleDragOver: function handleDragOver(e) {\n      e.dataTransfer.dropEffect = 'move';\n    },\n    handleDragEnter: function handleDragEnter(e, item) {\n      e.dataTransfer.effectAllowed = 'move';\n\n      if (item === this.dragging) {\n        return;\n      }\n\n      var newItems = _toConsumableArray(this.formValidate.images);\n\n      var src = newItems.indexOf(this.dragging);\n      var dst = newItems.indexOf(item);\n      newItems.splice.apply(newItems, [dst, 0].concat(_toConsumableArray(newItems.splice(src, 1))));\n      this.formValidate.images = newItems;\n    },\n    // 具体日期\n    onchangeTime: function onchangeTime(e) {\n      this.formValidate.section_time = e;\n    },\n    // 详情\n    getInfo: function getInfo() {\n      var _this6 = this;\n\n      this.spinShow = true;\n      bargainInfoApi(this.$route.params.id).then(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(res) {\n          var that, info, radio, defaultAttrs;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  that = _this6;\n                  info = res.data.info;\n                  _this6.formValidate = info;\n                  _this6.description = info.description;\n                  _this6.rule = info.rule;\n                  _this6.formValidate.rule = info.rule === null ? '' : info.rule;\n\n                  _this6.$set(_this6.formValidate, 'items', info.attrs.items);\n\n                  _this6.columns = info.attrs.header;\n                  radio = {\n                    title: '选择',\n                    key: 'chose',\n                    width: 60,\n                    align: 'center',\n                    render: function render(h, params) {\n                      var uid = params.index;\n                      var flag = false;\n\n                      if (_this6.currentid === uid) {\n                        flag = true;\n                      } else {\n                        flag = false;\n                      }\n\n                      var self = _this6;\n                      return h('div', [h('Radio', {\n                        props: {\n                          value: flag\n                        },\n                        on: {\n                          'on-change': function onChange() {\n                            self.currentid = uid;\n                            var attrs = [];\n                            attrs.push(params.row);\n                            self.formValidate.attrs = attrs;\n                          }\n                        }\n                      })]);\n                    }\n                  };\n                  that.columns.unshift(radio);\n                  _this6.specsData = info.attrs.value;\n                  defaultAttrs = [];\n                  info.attrs.value.forEach(function (item, index) {\n                    if (item.opt) {\n                      defaultAttrs.push(item);\n                      that.$set(that, 'currentid', index);\n                      that.$set(that.formValidate, 'attrs', defaultAttrs);\n                    }\n                  });\n                  _this6.spinShow = false;\n\n                case 14:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()).catch(function (res) {\n        _this6.spinShow = false;\n\n        _this6.$Message.error(res.msg);\n      });\n    },\n    // 下一步\n    next: function next(name) {\n      var _this7 = this;\n\n      if (this.current === 3) {\n        this.rule = this.formValidate.rule;\n        this.$refs[name].validate(function (valid) {\n          if (valid) {\n            if (_this7.currentid === '') {\n              return _this7.$Message.error('请选择属性规格');\n            } else {\n              var val = _this7.specsData[_this7.currentid];\n              var formValidate = _this7.formValidate.attrs[0];\n              formValidate.price = val.price;\n              formValidate.min_price = val.min_price;\n              formValidate.quota = val.quota;\n\n              if (_this7.formValidate.attrs[0].quota <= 0) {\n                return _this7.$Message.error('砍价限量必须大于0');\n              }\n            }\n\n            if (_this7.copy == 1) _this7.formValidate.copy = 1;\n            _this7.formValidate.id = _this7.$route.params.id || 0;\n            _this7.submitOpen = true;\n\n            if (!_this7.formValidate.product_type) {\n              _this7.formValidate.is_support_refund = 1;\n            }\n\n            bargainCreatApi(_this7.formValidate).then(\n            /*#__PURE__*/\n            function () {\n              var _ref2 = _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee2(res) {\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _this7.submitOpen = false;\n\n                        _this7.$Message.success(res.msg);\n\n                        setTimeout(function () {\n                          _this7.$router.push({\n                            path: '/admin/marketing/store_bargain/index'\n                          });\n                        }, 500);\n\n                      case 3:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }()).catch(function (res) {\n              _this7.submitOpen = false;\n\n              _this7.$Message.error(res.msg);\n            });\n          } else {\n            return false;\n          }\n        });\n      } else if (this.current === 2) {\n        this.description = this.formValidate.description;\n        this.rule = this.formValidate.rule;\n        this.current += 1;\n      } else if (this.current === 1) {\n        this.$refs[name].validate(function (valid) {\n          if (valid) {\n            if (_this7.formValidate.people_num == 1) {\n              return _this7.$Message.error('砍价人数必须大于1');\n            }\n\n            if (_this7.formValidate.product_type == 0 && !_this7.formValidate.delivery_type.length) {\n              return _this7.$Message.warning(\"请选择配送方式\");\n            }\n\n            if (_this7.formValidate.product_type == 0 && _this7.formValidate.freight == 2 && _this7.formValidate.postage <= 0) {\n              return _this7.$Message.warning(\"物流设置-固定邮费不能为0\");\n            }\n\n            if (_this7.formValidate.product_type == 0 && _this7.formValidate.freight == 3 && !_this7.formValidate.temp_id) {\n              return _this7.$Message.warning(\"物流设置-运费模板不能为空\");\n            }\n\n            if (_this7.formValidate.id && parseInt(_this7.formValidate.status) === 0) {\n              return _this7.$Modal.confirm({\n                title: '检测到您要下架该砍价商品',\n                content: '下架将会删除前台用户已砍的所有记录，所有用户将重新发起砍价,您确定要这样操作吗？',\n                okText: '我想好了，确定要下架',\n                cancelText: '取消下架，活动状态改为开启',\n                onOk: function onOk() {\n                  _this7.current += 1;\n                },\n                onCancel: function onCancel() {\n                  _this7.formValidate.status = 1;\n                  _this7.current += 1;\n                }\n              });\n            }\n\n            _this7.current += 1;\n          } else {\n            return _this7.$Message.warning('请完善商品信息');\n          }\n        });\n      } else {\n        if (this.formValidate.image) {\n          this.current += 1;\n        } else {\n          this.$Message.warning('请选择商品');\n        }\n      }\n    },\n    // 上一步\n    step: function step() {\n      this.current--;\n    },\n    // 内容\n    getContent: function getContent(val) {\n      this.formValidate.description = val;\n    },\n    // 规则\n    getRole: function getRole(val) {\n      this.formValidate.rule = val;\n    },\n    // 点击商品图\n    modalPicTap: function modalPicTap(tit, picTit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '单选' : '多选';\n      this.picTit = picTit;\n      this.tableIndex = index;\n    },\n    // 获取单张图片信息\n    getPic: function getPic(pc) {\n      switch (this.picTit) {\n        case 'danFrom':\n          this.formValidate.image = pc.att_dir;\n          break;\n\n        default:\n          this.specsData[this.tableIndex].pic = pc.att_dir;\n          this.formValidate.attrs[0].pic = pc.att_dir;\n      }\n\n      this.modalPic = false;\n    },\n    // 获取多张图信息\n    getPicD: function getPicD(pc) {\n      var _this8 = this;\n\n      this.images = pc;\n      this.images.map(function (item) {\n        _this8.formValidate.images.push(item.att_dir);\n\n        _this8.formValidate.images = _this8.formValidate.images.splice(0, 10);\n      });\n      this.modalPic = false;\n    },\n    handleRemove: function handleRemove(i) {\n      this.images.splice(i, 1);\n      this.formValidate.images.splice(i, 1);\n    },\n    // 选择商品\n    changeGoods: function changeGoods() {\n      this.modals = true;\n      this.$refs.goodslist.getList();\n      this.$refs.goodslist.goodsCategory();\n    },\n    // 表单验证\n    validate: function validate(prop, status, error) {\n      if (status === false) {\n        this.$Message.error(error);\n      }\n    },\n    // 添加自定义弹窗\n    addCustomDialog: function addCustomDialog(editorId) {\n      window.UE.registerUI('test-dialog', function (editor, uiName) {\n        // 创建 dialog\n        var dialog = new window.UE.ui.Dialog({\n          // 指定弹出层中页面的路径，这里只能支持页面，路径参考常见问题 2\n          iframeUrl: '/admin/widget.images/index.html?fodder=dialog',\n          // 需要指定当前的编辑器实例\n          editor: editor,\n          // 指定 dialog 的名字\n          name: uiName,\n          // dialog 的标题\n          title: '上传图片',\n          // 指定 dialog 的外围样式\n          cssRules: 'width:1200px;height:500px;padding:20px;'\n        });\n        this.dialog = dialog;\n        var btn = new window.UE.ui.Button({\n          name: 'dialog-button',\n          title: '上传图片',\n          cssRules: \"background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;\",\n          onclick: function onclick() {\n            // 渲染dialog\n            dialog.render();\n            dialog.open();\n          }\n        });\n        return btn;\n      }, 37);\n    }\n  }\n};",null]}