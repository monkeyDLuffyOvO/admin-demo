{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/components/distribution/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/components/distribution/index.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { distributionInfo } from '@/api/supplier';\nimport { distributionOrder } from '@/api/order';\nimport QRCode from 'qrcodejs2';\nimport Setting from '@/setting';\nexport default {\n  data: function data() {\n    return {\n      columns: [{\n        title: '商品编号',\n        key: 'index',\n        align: 'center',\n        width: 60\n      }, {\n        title: '商品名称',\n        slot: 'store_name',\n        align: 'center',\n        width: 253\n      }, {\n        title: '商品规格',\n        slot: 'suk',\n        align: 'center',\n        width: 219\n      }, // {\n      //     title: '商品条码',\n      //     key: 'bar_code',\n      //     align: 'center',\n      //     width: 109\n      // },\n      // {\n      //     title: '商品编码',\n      //     key: 'code',\n      //     align: 'center',\n      //     width: 109\n      // },\n      {\n        title: '单价',\n        key: 'truePrice',\n        align: 'center',\n        width: 100\n      }, {\n        title: '数量',\n        key: 'cart_num',\n        align: 'center',\n        width: 60\n      }, {\n        title: '金额',\n        key: 'subtotal',\n        align: 'center',\n        width: 100\n      }],\n      data: {},\n      goods: [],\n      BaseURL: Setting.apiBaseURL.replace(/adminapi/, \"\"),\n      newArrayData: []\n    };\n  },\n  created: function created() {\n    this.getDistribution();\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      var that = this;\n      setTimeout(function () {\n        that.creatQrCode();\n      }, 200);\n    });\n  },\n  methods: {\n    // 生成二维码\n    creatQrCode: function creatQrCode() {\n      var url = this.BaseURL;\n      var qrcode = '';\n      this.newArrayData.forEach(function (item, index) {\n        var obj = document.getElementById('qrCodeUrl' + index);\n        qrcode = new QRCode(obj, {\n          text: url,\n          // 需要转换为二维码的内容\n          width: 90,\n          height: 90,\n          colorDark: '#000000',\n          colorLight: '#ffffff',\n          correctLevel: QRCode.CorrectLevel.H\n        });\n      });\n    },\n    getDistribution: function getDistribution() {\n      var _this = this;\n\n      var header = this.$route.query.status == 1 ? distributionInfo : distributionOrder;\n      header(this.$route.query.id).then(function (res) {\n        _this.data = res.data;\n        _this.goods = res.data.list;\n        var data = res.data;\n        var newArray = [];\n        data.forEach(function (i, indexi) {\n          var listArray = [];\n          var goods = i.list;\n          var count = Math.ceil(goods.length / 7);\n\n          for (var j = 0; j < count; j++) {\n            var list = goods.slice(j * 7, j * 7 + 7);\n\n            if (list.length) {\n              listArray.push(list);\n            }\n          }\n\n          var num = 7 - listArray[listArray.length - 1].length;\n\n          if (num) {\n            for (var z = 0; z < num; z++) {\n              listArray[listArray.length - 1].push({\n                cart_num: '',\n                index: '',\n                store_name: '',\n                subtotal: '',\n                suk: '',\n                truePrice: ''\n              });\n            }\n          }\n\n          listArray.forEach(function (x) {\n            newArray.push({\n              real_name: i.real_name,\n              user_address: i.user_address,\n              user_phone: i.user_phone,\n              freight_price: i.freight_price,\n              coupon_price: i.coupon_price,\n              vip_true_price: i.vip_true_price,\n              use_integral: i.use_integral,\n              pay_price: i.pay_price,\n              mark: i.mark,\n              order_id: i.order_id,\n              pay_time: i.pay_time,\n              pay_type_name: i.pay_type_name,\n              goodsList: x\n            });\n          });\n        });\n        _this.newArrayData = newArray;\n      }).catch(function (err) {\n        _this.$Message.error(err.msg);\n      });\n    }\n  }\n};",null]}