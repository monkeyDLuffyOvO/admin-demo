{"remainingRequest":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js!/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js??ref--0-2!/home/darkcrossunicorn/文档/admin/src/pages/kefu/pc/components/rightMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/darkcrossunicorn/文档/admin/src/pages/kefu/pc/components/rightMenu.vue","mtime":1658973957000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/darkcrossunicorn/文档/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport delivery from \"./delivery\";\nimport remarks from \"./remarks\";\nimport userLabel from \"./userLabel\";\nimport { userInfo, getorderList, orderEdit as _orderEdit, orderRecord as _orderRecord, productCart as _productCart, productHot as _productHot, productVisit as _productVisit, userGroupApi, putGroupApi, getRefundOrderFrom } from \"@/api/kefu\";\nimport { erpConfig } from \"@/api/erp\";\nimport empty from \"../../components/empty\";\nimport dayjs from \"dayjs\";\nexport default {\n  name: \"rightMenu\",\n  components: {\n    delivery: delivery,\n    remarks: remarks,\n    userLabel: userLabel,\n    empty: empty\n  },\n  props: {\n    isTourist: {\n      type: String | Number,\n      default: 0\n    },\n    status: {\n      type: String | Number,\n      default: \"\"\n    },\n    //用户uid\n    uid: {\n      type: String | Number,\n      default: \"\"\n    },\n    webType: {\n      type: String | Number,\n      default: \"\"\n    },\n    exportOpen: {\n      type: String,\n      default: \"0\"\n    }\n  },\n  filters: {\n    statusFilters: function statusFilters(value) {\n      var statusMap = _defineProperty({\n        \"-1\": \"申请退款\",\n        \"-2\": \"退货成功\",\n        0: \"待发货\",\n        1: \"待收货\",\n        2: \"已收货\",\n        3: \"待评价\"\n      }, \"-1\", \"已退款\");\n\n      return statusMap[value];\n    },\n    getDay: function getDay(val) {\n      if (val) {\n        return dayjs.unix(val).format(\"YYYY年M月D日\");\n      }\n    },\n    typeFilters: function typeFilters(value) {\n      var statusMap = {\n        h5: \"H5\",\n        wechat: \"公众号\",\n        routine: \"小程序\",\n        pc: \"PC\"\n      };\n      return statusMap[value];\n    }\n  },\n  data: function data() {\n    return {\n      openErp: false,\n      userGroup: [],\n      model1: \"\",\n      curMenuIndex: 0,\n      menuList: [{\n        key: \"\",\n        title: \"全部\"\n      }, {\n        key: 0,\n        title: \"未支付\"\n      }, {\n        key: 1,\n        title: \"未发货\"\n      }, {\n        key: -1,\n        title: \"退款中\"\n      }],\n      activeUserInfo: \"\",\n      //用户详情\n      curStatus: this.status,\n      limit: 10,\n      orderConfig: {\n        page: 1,\n        type: \"\",\n        searchTxt: \"\"\n      },\n      orderList: [],\n      isOrderScroll: true,\n      isOrderHidden: true,\n      isDelivery: false,\n      // 发货弹窗\n      isRemarks: false,\n      // 备注弹窗\n      goodsTab: [{\n        key: 0,\n        title: \"购买\"\n      }, {\n        key: 1,\n        title: \"足迹\"\n      }, {\n        key: 2,\n        title: \"热销\"\n      }],\n      goodsConfig: {\n        type: 0,\n        buyList: []\n      },\n      isUserLabel: false,\n      remarkId: \"\",\n      itemId: 0,\n      remarkTitle: \"\",\n      orderId: \"\",\n      orderType: \"\",\n      storeName: \"\"\n    };\n  },\n  watch: {\n    uid: function uid(nVal, oVal) {\n      if (nVal != oVal && this.isTourist == 0 && nVal) {\n        this.orderConfig.page = 1;\n        this.isOrderScroll = true;\n        this.orderList = [];\n        Promise.all[(this.getUserInfo(), this.getOrderList(), this.productCart(), this.getUserGroup())];\n\n        if (this.goodsConfig.type == 0) {\n          this.productCart();\n        } else if (this.goodsConfig.type == 1) {\n          this.productVisit();\n        } else {\n          this.productHot();\n        }\n      } else {\n        this.orderConfig.page = 1;\n        this.isOrderScroll = true;\n        this.orderList = [];\n        this.activeUserInfo = \"\";\n      }\n    },\n    isTourist: function isTourist(nVal, oVal) {\n      if (nVal == 1) {\n        this.activeUserInfo = \"\";\n        this.orderList = [];\n        this.goodsConfig.buyList = [];\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var self = this;\n    this.getErpConfig();\n    this.bus.$on(\"selectRightMenu\", function (arg) {\n      _this.curStatus = arg;\n    });\n    if (this.uid && this.isTourist == 0) Promise.all[(this.getUserInfo(), this.getOrderList(), this.productCart(), this.getUserGroup())];\n  },\n  methods: {\n    getErpConfig: function getErpConfig() {\n      var _this2 = this;\n\n      erpConfig().then(function (res) {\n        _this2.openErp = res.data.open_erp;\n      }).catch(function (err) {\n        _this2.$Message.error(err.msg);\n      });\n    },\n    // 设置分组\n    onChange: function onChange(e) {\n      var _this3 = this;\n\n      if (e) {\n        putGroupApi(this.uid, e).then(function (res) {\n          _this3.$Message.success(res.msg);\n        });\n      }\n    },\n    //获取分组\n    getUserGroup: function getUserGroup() {\n      var _this4 = this;\n\n      userGroupApi().then(function (res) {\n        _this4.userGroup = res.data;\n      });\n    },\n    // 订单发货\n    openDelivery: function openDelivery(item) {\n      if (item.refund.length) return this.$Message.warning(\"存在售后待处理订单\");\n      this.$store.commit(\"admin/order/setSplitOrder\", item.total_num);\n      this.orderId = item.id;\n      this.orderType = item._status._type;\n      this.isDelivery = true;\n    },\n    // 订单发货成功\n    deliveryOk: function deliveryOk() {\n      this.orderConfig.page = 1;\n      this.isOrderScroll = true;\n      this.orderList = [];\n      this.getOrderList();\n      this.isDelivery = false;\n    },\n    // 订单备注\n    bindRemark: function bindRemark(item) {\n      this.remarkTitle = item.remark;\n      this.remarkId = item.order_id;\n      this.itemId = item.id;\n      this.isRemarks = true;\n    },\n    remarkSuccess: function remarkSuccess() {\n      this.remarkId = \"\";\n      this.isRemarks = false;\n      this.orderConfig.page = 1;\n      this.orderList = [];\n      this.isOrderScroll = true;\n      this.getOrderList();\n    },\n    //获取左侧用户列表用户详情\n    getUserInfo: function getUserInfo() {\n      var _this5 = this;\n\n      userInfo(this.uid).then(function (res) {\n        _this5.activeUserInfo = res.data;\n      }).catch(function (error) {\n        _this5.activeUserInfo = \"\";\n      });\n    },\n    // 获取订单列表\n    getOrderList: function getOrderList() {\n      var _this6 = this;\n\n      if (!this.isOrderScroll) return;\n      getorderList(this.uid, {\n        page: this.orderConfig.page,\n        limit: this.limit,\n        type: this.orderConfig.type,\n        search: this.orderConfig.searchTxt\n      }).then(function (res) {\n        _this6.orderConfig.page += 1;\n        _this6.isOrderScroll = res.data.length >= _this6.limit;\n        _this6.orderList = _this6.orderList.concat(res.data);\n      });\n    },\n    // 订单tab\n    bindTab: function bindTab(item) {\n      if (this.orderConfig.type === item.key) return;\n      this.orderConfig.type = item.key;\n\n      if (this.uid) {\n        this.orderConfig.page = 1;\n        this.isOrderScroll = true;\n        this.orderList = [];\n        this.getOrderList();\n      }\n    },\n    // 订单回车\n    orderSearch: function orderSearch() {\n      this.isOrderScroll = true;\n      this.orderList = [];\n      this.orderConfig.page = 1;\n      this.getOrderList();\n    },\n    // 关闭发货模态框\n    deliveryClose: function deliveryClose() {\n      this.isUserLabel = false;\n      this.isDelivery = false;\n      this.isRemarks = false;\n    },\n    // 订单改价\n    orderEdit: function orderEdit(id) {\n      var _this7 = this;\n\n      this.$modalForm(_orderEdit(id)).then(function () {\n        return _this7.getOrderList();\n      });\n    },\n    // 订单退款\n    orderRecord: function orderRecord(id) {\n      var _this8 = this;\n\n      this.$modalForm((this.orderConfig.type == -1 ? getRefundOrderFrom : _orderRecord)(id)).then(function () {\n        _this8.orderList = [];\n        _this8.orderConfig.page = 1;\n\n        _this8.getOrderList();\n      });\n    },\n    // 订单加载更多\n    orderReachBottom: function orderReachBottom() {\n      this.getOrderList();\n    },\n    // 商品信息tab\n    bindGoodsTab: function bindGoodsTab(item) {\n      if (this.goodsConfig.type == item.key) return;\n      this.goodsConfig.type = item.key;\n      if (this.uid == \"\") return;\n\n      if (item.key == 0) {\n        this.productCart();\n      } else if (item.key == 1) {\n        this.productVisit();\n      } else {\n        this.productHot();\n      }\n    },\n    // 商品购买记录\n    productCart: function productCart() {\n      var _this9 = this;\n\n      _productCart(this.uid, {\n        store_name: this.storeName\n      }).then(function (res) {\n        _this9.goodsConfig.buyList = res.data;\n      });\n    },\n    // 商品足迹\n    productVisit: function productVisit() {\n      var _this10 = this;\n\n      _productVisit(this.uid, {\n        store_name: this.storeName\n      }).then(function (res) {\n        _this10.goodsConfig.buyList = res.data;\n      });\n    },\n    // 热销商品\n    productHot: function productHot() {\n      var _this11 = this;\n\n      _productHot(this.uid, {\n        store_name: this.storeName\n      }).then(function (res) {\n        _this11.goodsConfig.buyList = res.data;\n      });\n    },\n    // 修改用户标签\n    editLabel: function editLabel() {\n      this.isUserLabel = false;\n      this.getUserInfo();\n    },\n    // 商品推送\n    pushGoods: function pushGoods(item) {\n      this.$emit(\"bindPush\", item.id);\n    },\n    // 商品搜索\n    productSearch: function productSearch() {\n      if (this.goodsConfig.type == 0) {\n        this.productCart();\n      } else if (this.goodsConfig.type == 1) {\n        this.productVisit();\n      } else {\n        this.productHot();\n      }\n    }\n  }\n};",null]}